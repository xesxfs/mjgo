var __reflect=this&&this.__reflect||function(e,t,o){e.__class__=t,o?o.push(t):o=[t],e.__types__=e.__types__?o.concat(e.__types__):o},__extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},BaseUI=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onEnable,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){},t.prototype.onRemove=function(){},t.prototype.setCenter=function(){this.x=(App.StageUtils.stageWidth-this.width)/2,this.y=(App.StageUtils.stageHeight-this.height)/2},t.prototype.setBottom=function(){this.x=(App.StageUtils.stageWidth-this.width)/2,this.y=App.StageUtils.stageHeight-this.height},t.prototype.hide=function(){this.parent&&this.parent.removeChild(this)},t.prototype.onDestroy=function(){},t}(eui.Component);__reflect(BaseUI.prototype,"BaseUI");var SingleClass=function(){function e(){}return e.getInstance=function(){var e=this;return null==e.instance&&(e.instance=new e),e.instance},e}();__reflect(SingleClass.prototype,"SingleClass");var BaseApp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moduleList={},t}return __extends(t,e),t.prototype.registerController=function(e,t){this.moduleList[e]=t,t.onRegister()},t.prototype.unRegisterController=function(e){this.moduleList[e].onRemove(),delete this.moduleList[e]},t.prototype.getController=function(e){return this.moduleList[e]},t.prototype.sendEvent=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];(n=App.EventManager).sendEvent.apply(n,[e].concat(t));var n},t.prototype.addEvent=function(e,t,o){App.EventManager.addEvent(e,t,o)},t.prototype.removeEvent=function(e,t,o){App.EventManager.removeEvent(e,t,o)},t}(SingleClass);__reflect(BaseApp.prototype,"BaseApp");var BaseController=function(){function e(){}return e.prototype.onRegister=function(){},e.prototype.onRemove=function(){},e.prototype.sendEvent=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];App.EventManager.sendEvent(e,t)},e.prototype.addEvent=function(e,t,o){App.EventManager.addEvent(e,t,o)},e.prototype.removeEvent=function(e,t,o){App.EventManager.removeEvent(e,t,o)},e}();__reflect(BaseController.prototype,"BaseController");var BasePanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){this.setCenter()},t.prototype.onRemove=function(){},t.prototype.show=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),App.PopUpManager.addPopUp(this,e,t)},t.prototype.hide=function(){App.PopUpManager.removePopUp(this)},t}(BaseUI);__reflect(BasePanel.prototype,"BasePanel");var BaseScene=function(e){function t(){var t=e.call(this)||this;return t.percentWidth=100,t.percentHeight=100,t}return __extends(t,e),t.prototype.setController=function(e){this.ctrl=e},t}(BaseUI);__reflect(BaseScene.prototype,"BaseScene");var RoomInfo=function(){function e(){this.deskList=[],this.init()}return e.prototype.clean=function(){this.init()},e.prototype.getCurDesk=function(){return this.curDesk},e.prototype.init=function(){this.deskList=[],this.curDesk=null},e.prototype.readDeskList=function(e){var t=this;this.clean(),e.forEach(function(e){var o=new DeskInfo;o.readData(e),t.deskList.push(o)}),this.sortDesk(this.deskList)},e.prototype.sortDesk=function(e){for(var t=e.length,o=0;t>o;o++)for(var n=o+1;t>n;n++)if(e[o].deskID>e[n].deskID){var r=e[o];e[o]=e[n],e[n]=r}},e.prototype.setCurDesk=function(e){this.curDesk=this.getDeskByNo(e)},e.prototype.setCurDeskById=function(e){this.curDesk=this.getDeskById(e)},e.prototype.addDesk=function(e){var t=new DeskInfo;t.readData(e),this.deskList.push(t)},e.prototype.exCurDesk=function(e){var t,o=!1;if(e.basePoint&&(this.curDesk.basePoint=e.basePoint,o=!0),e.deskName&&(this.curDesk.deskName=e.deskName),t=e.gameConfig){for(var n in t)this.curDesk.gameConfig[n]=t[n],o=!0;return o}},e.prototype.getDeskById=function(e){for(var t,o=0;o<this.deskList.length;o++){var n=this.deskList[o];if(e==n.deskID)return t=n}console.log("no find deskId:",e)},e.prototype.getDeskByNo=function(e){for(var t,o=0;o<this.deskList.length;o++){var n=this.deskList[o];if(e==n.deskNo)return t=n}console.log("no find deskNo:",e)},e}();__reflect(RoomInfo.prototype,"RoomInfo");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,o){function n(n){t.call(o,n,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?n(r):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var BitmapMovie=function(e){function t(){var t=e.call(this)||this;return t.bmdList=[],t.curFrame=0,t.totalFrame=0,t.delay=33,t.loop=1,t}return __extends(t,e),t.prototype.setImgBuffer=function(e,t,o){for(var n=o-t,r=0;n>=r;r++)this.bmdList.push(RES.getRes(e+r+"_png"));this.curFrame=0,this.bitmapData=this.bmdList[0],this.totalFrame=this.bmdList.length},t.prototype.play=function(e){void 0===e&&(e=1),this.loop=e,this.startTimer()},t.prototype.gotoAndPlay=function(e,t){void 0===t&&(t=1),this.curFrame=e,this.bitmapData=this.bmdList[this.curFrame],this.play(t)},t.prototype.stop=function(){this.stopTimer()},t.prototype.startTimer=function(){this.animTimer||(this.animTimer=new egret.Timer(this.delay)),this.animTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.animTimer.delay=this.delay,this.animTimer.reset(),this.animTimer.start()},t.prototype.onTimer=function(){if(this.curFrame==this.totalFrame){if(this.loop--,!(this.loop>0))return this.stopTimer(),void this.dispatchEvent(new egret.Event(egret.Event.COMPLETE));this.gotoAndPlay(0,this.loop)}this.bitmapData=this.bmdList[this.curFrame],this.curFrame++},t.prototype.stopTimer=function(){this.animTimer&&(this.animTimer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.animTimer.stop())},t}(egret.Bitmap);__reflect(BitmapMovie.prototype,"BitmapMovie");var ClientSocket=function(){function e(){this.name="",this.callBackList={},this.objList={},this.reconnecting=!1,this.reconInvalTime=3e3,this.curReconnectCount=0,this.reconnenctLimit=5,this.bAllowReconnnect=!1,this.protoBuffer="",this.dataBuffer=null,this.url=""}return e.prototype.register=function(e,t,o){this.callBackList[e]=t,this.objList[e]=o},e.prototype.unRegister=function(e){delete this.callBackList[e],delete this.objList[e]},e.prototype.startConnect=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=1),console.log("开始连接"+this.name+":"+e),this.url=e,this.serverType=o,this.bAllowReconnnect=t,this.createSocket(),this.socket.connectByUrl(e)},e.prototype.createSocket=function(){this.socket&&(this.socket.removeEventListener(egret.Event.CONNECT,this.onConnect,this),this.socket.removeEventListener(egret.Event.CLOSE,this.onClose,this),this.socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this.socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onRecieve,this),this.socket.connected&&this.socket.close()),this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_STRING,this.socket.addEventListener(egret.Event.CONNECT,this.onConnect,this),this.socket.addEventListener(egret.Event.CLOSE,this.onClose,this),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onRecieve,this)},e.prototype.onConnect=function(e){egret.log(this.name+" connect success"),this.resetReconnenct(),App.EventManager.sendEvent(EventConst.SocketConnect,this)},e.prototype.onClose=function(e){egret.log(this.name+" close"),(0==this.bAllowReconnnect||this.bAllowReconnnect&&this.curReconnectCount>this.reconnenctLimit)&&(this.resetReconnenct(),App.EventManager.sendEvent(EventConst.SocketClose,this))},e.prototype.onError=function(e){egret.log(this.name+" error"),0==this.tryReconnect()&&App.EventManager.sendEvent(EventConst.SocketIOError,this)},e.prototype.tryReconnect=function(){return 0==this.bAllowReconnnect?!1:(this.curReconnectCount++,this.curReconnectCount<=this.reconnenctLimit?(1==this.curReconnectCount&&App.EventManager.sendEvent(EventConst.StartReconnect,this),egret.setTimeout(this.startConnect,this,this.reconInvalTime,this.url,!0),!0):!1)},e.prototype.close=function(){this.socket&&(this.socket.removeEventListener(egret.Event.CONNECT,this.onConnect,this),this.socket.removeEventListener(egret.Event.CLOSE,this.onClose,this),this.socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this.socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onRecieve,this),this.socket.connected&&this.socket.close()),this.resetReconnenct(),this.dataBuffer=null,this.protoBuffer=null},e.prototype.resetReconnenct=function(){this.reconnecting=!1,this.curReconnectCount=0},e.prototype.isConnected=function(){return this.socket&&this.socket.connected?!0:!1},e.prototype.send=function(e){if(void 0===e&&(e={}),this.socket&&this.socket.connected){var t=JSON.stringify(e);console.log("send:"+t),this.socket.writeUTF(t),this.socket.flush()}else egret.log("socket is not connected"),this.dataBuffer=e,App.EventManager.sendEvent(EventConst.SocketNotConnect,this)},e.prototype.onRecieve=function(e){var t=this.socket.readUTF();console.log("rev:"+t),this.process(t)},e.prototype.process=function(e){var t,o=e;if(""!=o&&(t=JSON.parse(o)),!t.hasOwnProperty("cmd"))return void console.log("未知指令");var n="cmd"+t.cmd,r=this.callBackList[n],i=this.objList[n];r&&i?r.call(i,t):console.log("不存在对应消息:",n)},e}();__reflect(ClientSocket.prototype,"ClientSocket");var CryptoUtils=function(){function e(){this.key="YUS!8W@zyl@k9NrQ"}return Object.defineProperty(e,"instance",{get:function(){return this._instance?this._instance:(this._instance=new e,this._instance)},enumerable:!0,configurable:!0}),e.prototype.encrypt=function(e){var t=JSON.stringify(e),t=rc4(t,this.key);return t=base64_encode(t),t=t.replace(/\+/g,"-")},e.prototype.decrypt=function(e){var t=base64_decode(e);t=rc4(t,this.key);var o=JSON.parse(t);return o},e}();__reflect(CryptoUtils.prototype,"CryptoUtils");var SocketManager=function(e){function t(){var t=e.call(this)||this;return t.gameSocket=new ClientSocket,t.gameSocket.name="gameSocket",t.pushSocket=new ClientSocket,t.pushSocket.name="pushSocket",t.serverSocket=new ClientSocket,t.serverSocket.name="serverSocket",t}return __extends(t,e),t}(SingleClass);__reflect(SocketManager.prototype,"SocketManager");var ArrayTool=function(){function e(){}return e.copyArr=function(e){for(var t=[],o=e.length,n=0;o>n;n++)t[n]=e[n];return t},e.sortArr=function(e){for(var t=e.length,o=0;t>o;o++)for(var n=o+1;t>n;n++)if(e[o]>e[n]){var r=e[o];e[o]=e[n],e[n]=r}},e.sortScrollGroup=function(e,t,o,n,r,i){for(var a,s,c,l=e.numChildren,p=0;l>p;p++)c=e.getChildAt(p),a=Math.floor(p/t),s=p%t,c.anchorOffsetX=c.width/2,c.anchorOffsetY=c.height/2,c.x=(s+1)*r+s*o+o/2,c.y=(a+1)*r+a*n+n/2},e.getObjectLength=function(e){var t=0;for(var o in e)t++;return t},e.swap=function(e,t,o){var n=e[t];e[t]=e[o],e[o]=n},e.randSort=function(e){for(var t=e.length,o=0;t>o;o++)this.swap(e,o,NumberTool.getRandInt(0,t-1))},e}();__reflect(ArrayTool.prototype,"ArrayTool");var DateTimer=function(e){function t(t,o){void 0===o&&(o=0);var n=e.call(this)||this;return n.delay=t,n.repeatCount=o,n}return __extends(t,e),t.prototype.start=function(){this.previous=egret.getTimer(),this.accTime=0,egret.startTick(this.update,this)},t.prototype.reset=function(){this.previous=egret.getTimer(),this.accTime=0,this.currentCount=0},t.prototype.stop=function(){egret.stopTick(this.update,this)},t.prototype.update=function(){for(this.curTime=egret.getTimer(),this.passTime=this.curTime-this.previous,this.previous=this.curTime,this.accTime+=this.passTime;this.accTime>=this.delay;)this.accTime-=this.delay,this.currentCount++,this.repeatCount>0&&this.currentCount==this.repeatCount&&(this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER_COMPLETE)),this.stop()),this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER));return!1},t}(egret.EventDispatcher);__reflect(DateTimer.prototype,"DateTimer");var DeviceUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"IsWeb",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsIos",{get:function(){return"iOS"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsAndroid",{get:function(){return"Android"==egret.Capabilities.os},enumerable:!0,configurable:!0}),t}(SingleClass);__reflect(DeviceUtils.prototype,"DeviceUtils");var EffectUtils;!function(e){function t(e,t){void 0===t&&(t=1e3),e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.scaleX=4,e.scaleY=4,e.alpha=0,egret.Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},200).wait(t).call(function(){e.parent&&e.parent.removeChild(e)})}function o(e,t){void 0===t&&(t=1e3);var o=e.y,n=new Date,r=n.getSeconds();egret.Tween.get(e).wait(t).to({y:o-100,alpha:.5},250).call(function(){var t=new Date,o=t.getSeconds(),n=o-r;console.log("tips显示时间="+n),e.parent&&e.parent.removeChild(e)})}function n(e,t,o,n){void 0===t&&(t=200),void 0===o&&(o=0),void 0===n&&(n=0);var r=e.y;egret.Tween.get(e,{loop:!0}).wait(o).to({y:r-e.height/3},t/2).to({y:r},t/2).wait(n)}function r(t){for(var o=t.length,n=400,r=0,i=0,a=.5,s=0;o>s;s++)r=s*(n*(1-a)),i=(o-s)*(n*(1-a)),e.bounce(t[s],n,r,i)}function i(e){egret.Tween.removeTweens(e)}function a(t){for(var o=t.length,n=0;o>n;n++)e.removeTween(t[n])}e.showMax2Min=t,e.showFload=o,e.bounce=n,e.bounceOneByOne=r,e.removeTween=i,e.removeObjsTween=a}(EffectUtils||(EffectUtils={}));var EventMananger=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventList={},t}return __extends(t,e),t.prototype.sendEvent=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this.eventList[e];if(null!=n)for(var r,i,a=n.length,s=0;a>s;s++){var c=n[s];r=c[0],i=c[1],r.apply(i,t)}},t.prototype.addEvent=function(e,t,o){var n=this.eventList[e];if(null==n)n=[],this.eventList[e]=n;else for(var r=n.length,i=0;r>i;i++)if(n[i][0]==t&&n[i][1]==o)return;n.push([t,o])},t.prototype.removeEvent=function(e,t,o){var n=this.eventList[e];if(null!=n)for(var r=n.length,i=r-1;i>=0;i--)n[i][0]==t&&n[i][1]==o&&n.splice(i,1);0==n.length&&(this.eventList[e]=null,delete this.eventList[e])},t}(SingleClass);__reflect(EventMananger.prototype,"EventMananger");var LayerManager=function(e){function t(){var t=e.call(this)||this;return t.rootLayer=new eui.UILayer,t.rootLayer.percentWidth=100,t.rootLayer.percentHeight=100,t.rootLayer.touchEnabled=!1,App.StageUtils.stage.addChild(t.rootLayer),t.sceneLayer=new eui.UILayer,t.sceneLayer.touchEnabled=!1,t.rootLayer.addChild(t.sceneLayer),t.popLayer=new eui.UILayer,t.popLayer.touchEnabled=!1,t.rootLayer.addChild(t.popLayer),t.lockLayer=new eui.UILayer,t.lockLayer.touchEnabled=!1,t.rootLayer.addChild(t.lockLayer),t.msgLayer=new eui.UILayer,t.msgLayer.touchEnabled=!1,t.rootLayer.addChild(t.msgLayer),t.tipLayer=new eui.UILayer,t.tipLayer.touchEnabled=!1,t.rootLayer.addChild(t.tipLayer),t}return __extends(t,e),t}(SingleClass);__reflect(LayerManager.prototype,"LayerManager");var NumberTool=function(){function e(){}return e.formatTime=function(e){return e>=0&&10>e?"0"+e:e+""},e.getRandInt=function(e,t){return Math.round(Math.random()*(t-e))+e},e.formatCapital=function(e){return 0>=e||e>=10?"":["一","二","三","四","五","六","七","八","九"][e-1]},e.formatMoney=function(e){return e>=1e4||-1e4>=e?Math.round(e/100)/100+"万":e+""},e}();__reflect(NumberTool.prototype,"NumberTool");var ObjectPool=function(){function e(e){this.className=e,this.list=[]}return e.prototype.getObject=function(){if(this.list.length>0)return this.list.shift();var e=egret.getDefinitionByName(this.className);return new e},e.prototype.returnObject=function(e){this.list.push(e)},e.getPool=function(t,o){if(void 0===o&&(o=0),!e.pool[t]&&(e.pool[t]=new e(t),0!=o))for(var n=egret.getDefinitionByName(t),r=e.pool[t],i=0;o>i;i++)r.returnObject(new n);return e.pool[t]},e}();ObjectPool.pool={},__reflect(ObjectPool.prototype,"ObjectPool");var PanelManager=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelList={},t.panelClassList={},t.assetList={},t}return __extends(t,e),t.prototype.register=function(e,t,o){void 0===o&&(o=null),this.panelClassList[e]=t,this.assetList[e]=o},t.prototype.open=function(e,t,o,n,r,i){var a=this;void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===i&&(i=null);var s=this.panelList[e];if(null==s){var c=this.panelClassList[e];if(null==c)return null;s=new c,this.panelList[e]=s}null!=i&&s.recDataFun(i);var l=this.assetList[e];return null!=l?(App.LoadingLock.lock(),App.ResUtils.loadGroup(l,this,function(){App.LoadingLock.unlock(),null!=t&&null!=o&&s.once(egret.Event.ADDED_TO_STAGE,function(){t.call(o,!0)},a),App.PopUpManager.addPopUp(s,r,n)},null,10)):(null!=t&&null!=o&&s.once(egret.Event.ADDED_TO_STAGE,function(){t.call(o)},this),App.PopUpManager.addPopUp(s,r,n)),s},t.prototype.close=function(e){var t=this.panelList[e];return null!=t&&App.PopUpManager.removePopUp(t),t},t.prototype.getPanel=function(e){return this.panelList[e]},t.prototype.closeAllPanel=function(){App.ResUtils.deleteAllCallBack(),App.PopUpManager.removeAllPopUp(),App.LoadingLock.unlock()},t}(SingleClass);__reflect(PanelManager.prototype,"PanelManager");var PopUpManager=function(e){function t(){var t=e.call(this)||this;return t.lockCount=0,t.clickClose=[],t.createLockBg(),t}return __extends(t,e),t.prototype.addPopUp=function(e,t,o){void 0===t&&(t=!0),void 0===o&&(o=!0);var n=App.LayerManager.popLayer;t&&(this.lockCount++,n.addChild(this.lockBg)),this.clickClose[this.lockCount]=o,n.addChild(e),this.curPanel=e},t.prototype.removePopUp=function(e){e.parent&&e.parent.removeChild(e);var t=App.LayerManager.popLayer;this.lockCount--,this.lockCount>0?(this.clickClose[this.lockCount]=!1,t.setChildIndex(this.lockBg,t.numChildren-2)):(this.lockCount=0,this.clickClose[this.lockCount]=!1,this.lockBg.parent&&this.lockBg.parent.removeChild(this.lockBg))},t.prototype.removeAllPopUp=function(){var e=App.LayerManager.popLayer;e.removeChildren(),this.lockBg.parent&&this.lockBg.parent.removeChild(this.lockBg),this.lockCount=0,this.clickClose.length=0},t.prototype.changeTransparency=function(e){this.lockBg.alpha=e},t.prototype.createLockBg=function(){this.lockBg=new egret.Sprite,this.lockBg.graphics.beginFill(0,.5);var e=App.StageUtils.stage;this.lockBg.graphics.drawRect(0,0,e.stageWidth,e.stageHeight),this.lockBg.graphics.endFill(),this.lockBg.touchEnabled=!0,this.lockBg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.onTouchTap=function(){this.clickClose[this.lockCount]&&this.removePopUp(this.curPanel)},t}(SingleClass);__reflect(PopUpManager.prototype,"PopUpManager");var ResUtils=function(e){function t(){var t=e.call(this)||this;return t.initResVersion(),t.groupList=new Array,t.configList=new Array,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onResourceLoadComplete,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,t.onResourceLoadProgress,t),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,t.onResourceLoadError,t),t}return __extends(t,e),t.prototype.initResVersion=function(){window&&window.version&&(RES.web.Html5VersionController.prototype.getVirtualUrl=function(e){var t=window.version;return e+=-1==e.indexOf("?")?"?ver="+t:"&ver="+t})},t.prototype.addConfig=function(e,t){this.configList.push([e,t])},t.prototype.loadConfig=function(e,t){this.onConfigComplete=e,this.onConfigCompleteTarget=t,this.loadNextConfig()},t.prototype.loadNextConfig=function(){if(0==this.configList.length)return this.onConfigComplete.call(this.onConfigCompleteTarget),this.onConfigComplete=null,void(this.onConfigCompleteTarget=null);var e=this.configList.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},t.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},t.prototype.loadGroupQuiet=function(e,t){void 0===t&&(t=1);var o=this.combGroupName(e);RES.loadGroup(o,t)},t.prototype.loadGroup=function(e,t,o,n,r){void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=1);var i=this.combGroupName(e);this.groupList[i]=[o,n,t],this.loadGroupQuiet(e,r)},t.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(console.log("加载资源组完成:",t),this.groupList[t]){var o=this.groupList[t][0],n=this.groupList[t][2];null!=o&&o.call(n),this.deleteCallBack(t)}},t.prototype.onResourceLoadProgress=function(e){var t=e.groupName;if(this.groupList[t]){var o=this.groupList[t][1],n=this.groupList[t][2];null!=o&&o.call(n,e)}},t.prototype.onResourceLoadError=function(e){console.error(e.groupName+"资源组加载失败"),this.onResourceLoadComplete(e)},t.prototype.deleteCallBack=function(e){console.log("取消加载资源组回调:"+e),this.groupList[e]=null,delete this.groupList[e]},t.prototype.deleteAllCallBack=function(){for(var e in this.groupList)this.deleteCallBack(e)},t.prototype.combGroupName=function(e){var t="";if("string"==typeof e)t=e;else{for(var o=e.length,n=0;o>n;n++)t+=e[n];RES.createGroup(t,e)}return t},t}(SingleClass);__reflect(ResUtils.prototype,"ResUtils");var SceneManager=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sceneClassList={},t.sceneList={},t}return __extends(t,e),t.prototype.register=function(e,t){this.sceneClassList[e]=t},t.prototype.runScene=function(e,t){void 0===t&&(t=null),this.curScene&&App.LayerManager.sceneLayer.removeChild(this.curScene);var o=this.sceneList[e];if(null==o){var n=this.sceneClassList[e];if(null==n)return console.error("当前场景不存在:",e),null;o=new n,this.sceneList[e]=o}return this.curScene=o,t&&this.curScene.setController(t),App.LayerManager.sceneLayer.addChild(this.curScene),this.curScene},t.prototype.getScene=function(e){return this.sceneList[e]},t.prototype.setScene=function(e,t){this.sceneList[e]=t},t.prototype.getCurScene=function(){return this.curScene},t}(SingleClass);__reflect(SceneManager.prototype,"SceneManager");var SoundManager=function(e){function t(){var t=e.call(this)||this;t.soundList={},t._allowPlayEffect=!0,t._allowPlayBGM=!0,t._effectVolume=1,t._bgmVolume=1,t.girlCard=[],t.girlAct=[],t.boyCard=[],t.boyAct=[],t.gd_girlCard=[],t.gd_girlAct=[],t.gd_boyCard=[],t.gd_boyAct=[],t.boyChat=[],t.girlChat=[],t.gd_boyChat=[],t.gd_girlChat=[],t.isGuangDongSpeak=!0;for(var o=0;9>o;o++)t.boyCard[17+o]="man"+(o+11)+"_mp3",t.boyCard[33+o]="man"+(o+31)+"_mp3",t.boyCard[49+o]="man"+(o+21)+"_mp3",t.girlCard[17+o]="woman"+(o+11)+"_mp3",t.girlCard[33+o]="woman"+(o+31)+"_mp3",t.girlCard[49+o]="woman"+(o+21)+"_mp3",t.gd_boyCard[17+o]="gd_man"+(o+11)+"_mp3",t.gd_boyCard[33+o]="gd_man"+(o+31)+"_mp3",t.gd_boyCard[49+o]="gd_man"+(o+21)+"_mp3",t.gd_girlCard[17+o]="gd_woman"+(o+11)+"_mp3",t.gd_girlCard[33+o]="gd_woman"+(o+31)+"_mp3",t.gd_girlCard[49+o]="gd_woman"+(o+21)+"_mp3";for(var o=0;4>o;o++)t.boyCard[65+o]="man"+(o+41)+"_mp3",t.girlCard[65+o]="woman"+(o+41)+"_mp3",t.gd_boyCard[65+o]="gd_man"+(o+41)+"_mp3",t.gd_girlCard[65+o]="gd_woman"+(o+41)+"_mp3";for(var o=0;3>o;o++)t.boyCard[81+o]="man"+(o+51)+"_mp3",t.girlCard[81+o]="woman"+(o+51)+"_mp3",t.gd_boyCard[81+o]="gd_man"+(o+51)+"_mp3",t.gd_girlCard[81+o]="gd_woman"+(o+51)+"_mp3";t.boyAct[ACT_act.Act_Chi]=[],t.boyAct[ACT_act.Act_AnGang]=[],t.boyAct[ACT_act.Act_Gang]=[],t.boyAct[ACT_act.Act_Hu]=[],t.boyAct[ACT_act.Act_Peng]=[],t.boyAct[ACT_act.Act_zimo]=[],t.girlAct[ACT_act.Act_Chi]=[],t.girlAct[ACT_act.Act_AnGang]=[],t.girlAct[ACT_act.Act_Gang]=[],t.girlAct[ACT_act.Act_Hu]=[],t.girlAct[ACT_act.Act_Peng]=[],t.girlAct[ACT_act.Act_zimo]=[],t.gd_boyAct[ACT_act.Act_Chi]=[],t.gd_boyAct[ACT_act.Act_AnGang]=[],t.gd_boyAct[ACT_act.Act_Gang]=[],t.gd_boyAct[ACT_act.Act_Hu]=[],t.gd_boyAct[ACT_act.Act_Peng]=[],t.gd_boyAct[ACT_act.Act_zimo]=[],t.gd_girlAct[ACT_act.Act_Chi]=[],t.gd_girlAct[ACT_act.Act_AnGang]=[],t.gd_girlAct[ACT_act.Act_Gang]=[],t.gd_girlAct[ACT_act.Act_Hu]=[],t.gd_girlAct[ACT_act.Act_Peng]=[],t.gd_girlAct[ACT_act.Act_zimo]=[];for(var o=0;3>o;o++)t.boyAct[ACT_act.Act_Chi][o]="man_chi"+o+"_mp3",t.boyAct[ACT_act.Act_AnGang][o]="man_gang"+o+"_mp3",t.boyAct[ACT_act.Act_Gang][o]="man_gang"+o+"_mp3",t.boyAct[ACT_act.Act_Hu][o]="man_hu"+o+"_mp3",t.boyAct[ACT_act.Act_Peng][o]="man_peng"+o+"_mp3",t.boyAct[ACT_act.Act_zimo][o]="man_zimo"+o+"_mp3",t.girlAct[ACT_act.Act_Chi][o]="woman_chi"+o+"_mp3",t.girlAct[ACT_act.Act_AnGang][o]="woman_gang"+o+"_mp3",t.girlAct[ACT_act.Act_Gang][o]="woman_gang"+o+"_mp3",t.girlAct[ACT_act.Act_Hu][o]="woman_hu"+o+"_mp3",t.girlAct[ACT_act.Act_Peng][o]="woman_peng"+o+"_mp3",t.girlAct[ACT_act.Act_zimo][o]="woman_zimo"+o+"_mp3",t.gd_boyAct[ACT_act.Act_Chi][o]="gd_man_chi"+o+"_mp3",t.gd_boyAct[ACT_act.Act_AnGang][o]="gd_man_gang"+o+"_mp3",t.gd_boyAct[ACT_act.Act_Gang][o]="gd_man_gang"+o+"_mp3",t.gd_boyAct[ACT_act.Act_Hu][o]="gd_man_hu"+o+"_mp3",t.gd_boyAct[ACT_act.Act_Peng][o]="gd_man_peng"+o+"_mp3",t.gd_boyAct[ACT_act.Act_zimo][o]="gd_man_zimo"+o+"_mp3",t.gd_girlAct[ACT_act.Act_Chi][o]="gd_woman_chi"+o+"_mp3",t.gd_girlAct[ACT_act.Act_AnGang][o]="gd_woman_gang"+o+"_mp3",t.gd_girlAct[ACT_act.Act_Gang][o]="gd_woman_gang"+o+"_mp3",t.gd_girlAct[ACT_act.Act_Hu][o]="gd_woman_hu"+o+"_mp3",t.gd_girlAct[ACT_act.Act_Peng][o]="gd_woman_peng"+o+"_mp3",t.gd_girlAct[ACT_act.Act_zimo][o]="gd_woman_zimo"+o+"_mp3";for(var o=0;7>=o;o++)t.boyChat.push("man_chat"+o+"_mp3"),t.gd_boyChat.push("gd_man_chat"+o+"_mp3"),t.girlChat.push("woman_chat"+o+"_mp3"),t.gd_girlChat.push("gd_woman_chat"+o+"_mp3");return t}return __extends(t,e),t.prototype.playOutCard=function(e,t){void 0===t&&(t=SEX_TYPE.boy),t==SEX_TYPE.boy?this.isGuangDongSpeak?this.playEffect(this.gd_boyCard[e]):this.playEffect(this.boyCard[e]):this.isGuangDongSpeak?this.playEffect(this.gd_girlCard[e]):this.playEffect(this.girlCard[e])},t.prototype.playAct=function(e,t){void 0===t&&(t=SEX_TYPE.boy);var o=NumberTool.getRandInt(0,2);t==SEX_TYPE.boy?this.isGuangDongSpeak?this.gd_boyAct[e]&&this.playEffect(this.gd_boyAct[e][o]):this.boyAct[e]&&this.playEffect(this.boyAct[e][o]):this.isGuangDongSpeak?this.gd_girlAct[e]&&this.playEffect(this.gd_girlAct[e][o]):this.girlAct[e]&&this.playEffect(this.girlAct[e][o])},t.prototype.playChat=function(e,t){void 0===t&&(t=SEX_TYPE.boy),t==SEX_TYPE.boy?this.isGuangDongSpeak?this.gd_boyChat[e]&&this.playEffect(this.gd_boyChat[e]):this.boyChat[e]&&this.playEffect(this.boyChat[e]):this.isGuangDongSpeak?this.gd_girlChat[e]&&this.playEffect(this.gd_girlChat[e]):this.girlChat[e]&&this.playEffect(this.girlChat[e])},t.prototype.playEffect=function(e,t,o){if(void 0===t&&(t=0),void 0===o&&(o=1),0!=this.allowPlayEffect){var n=this.soundList[e];if(null==n&&(n=RES.getRes(e),null!=n&&(this.soundList[e]=n)),n){n.type=egret.Sound.EFFECT;var r=n.play(t,o);r.volume=this._effectVolume}}},t.prototype.playBGM=function(e,t,o){if(void 0===t&&(t=0),void 0===o&&(o=Number.MAX_VALUE),0!=this.allowPlayBGM&&null==this.bgmChannel){this.stopBGM();var n=this.soundList[e];null==n&&(n=RES.getRes(e),n&&(this.soundList[e]=n)),n&&(n.type=egret.Sound.MUSIC,this.bgmChannel=n.play(t,o),this.bgmChannel.volume=this._bgmVolume)}},t.prototype.stopBGM=function(){this.bgmChannel&&(this.bgmChannel.stop(),this.bgmChannel=null)},Object.defineProperty(t.prototype,"allowPlayEffect",{get:function(){return this._allowPlayEffect},set:function(e){this._allowPlayEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowPlayBGM",{get:function(){return this._allowPlayBGM},set:function(e){this._allowPlayBGM=e,0==this._allowPlayBGM?this.stopBGM():this.playBGM(t.bgm)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effectVolume",{get:function(){return this._effectVolume},set:function(e){this._effectVolume=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bgmVolume",{get:function(){return this._bgmVolume},set:function(e){this._bgmVolume=e,this.bgmChannel&&(this.bgmChannel.volume=this._bgmVolume)},enumerable:!0,configurable:!0}),t}(SingleClass);SoundManager.win="audio_win_mp3",SoundManager.lose="audio_lose_mp3",SoundManager.warn="audio_warn_mp3",SoundManager.hall_click="audio_button_click_mp3",SoundManager.clickCard="audio_card_click_mp3",SoundManager.enter="audio_enter_mp3",SoundManager.bgm="Audio_Game_Back_mp3",SoundManager.user_left="audio_left_mp3",SoundManager.liuju="audio_liuju_mp3",SoundManager.ready="audio_ready_mp3",SoundManager.shazi="audio_shaizi_mp3",SoundManager.tuoGuan="audio_tuo_guan_mp3",__reflect(SoundManager.prototype,"SoundManager");var StageUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"stage",{get:function(){return egret.MainContext.instance.stage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageWidth",{get:function(){return this.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageHeight",{get:function(){return this.stage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"halfStageWidth",{get:function(){return this.stage.stageWidth/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"halfStageHeight",{get:function(){return this.stage.stageHeight/2},enumerable:!0,configurable:!0}),t.prototype.runBrowserAdapt=function(){this.stage.addEventListener(egret.StageOrientationEvent.ORIENTATION_CHANGE,this.changeScaleMode,this)},t.prototype.changeScaleMode=function(){},t}(SingleClass);__reflect(StageUtils.prototype,"StageUtils");var StringTool=function(){function e(){}return e.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},e.formatNickName=function(e,t){void 0===t&&(t=10);var o=this.getStrLength(e);return o>t?e.substr(0,Math.round(t/2)-1)+"...":e},e.getStrLength=function(e){for(var t=0,o=0,n=0;n<e.length;n++)o=e.charCodeAt(n),o>127||o>=65&&90>=o?t+=2:t++;return t},e}();__reflect(StringTool.prototype,"StringTool");var Tips;!function(e){function t(e){r(e,!0)}function o(e){r(e)}function n(e){r(e)}function r(e,t){void 0===t&&(t=!1);var o=new egret.TextField;o.size=28,o.strokeColor=9653286;var n=new egret.Sprite;n.graphics.beginFill(9653286);var r=0,i=0,a=40;n.graphics.drawRoundRect(r,i,e.length*o.size+a,o.size+a,50),n.graphics.endFill(),n.alpha=.9,o.stroke=2,o.bold=!0,o.text=e,t?o.textColor=16774522:o.textColor=16774522,n.addChild(o),o.x=(n.width-o.width)/2,o.y=(n.height-o.height)/2,n.x=(App.StageUtils.stageWidth-n.width)/2,n.y=(App.StageUtils.stageHeight-n.height)/2,App.LayerManager.tipLayer&&App.LayerManager.tipLayer.addChild(n),EffectUtils.showFload(n,2e3)}e.error=t,e.info=o,e.warn=n}(Tips||(Tips={}));var App=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.startUp=function(){if(t.DeviceUtils.IsWeb&&(t.StageUtils.changeScaleMode(),t.StageUtils.runBrowserAdapt()),t.DeviceUtils.IsNative){var e={current:10,total:10},o=JSON.stringify(e);egret.ExternalInterface.call("customLoadingFlag",o)}t.DeviceUtils.IsNative&&this.setInterfaces(),this.registerController(LoginController.NAME,new LoginController),this.registerController(HallController.NAME,new HallController),this.registerController(GameController.NAME,new GameController);var n=t.SceneManager;n.register(SceneConst.LoginScene,LoginScene),n.register(SceneConst.HallScene,HallScene),n.register(SceneConst.GameScene,GameScene);var r=t.PanelManager;r.register(PanelConst.PreloadPanel,PreloadPanel),r.register(PanelConst.CroomPanle,CroomPanel),r.register(PanelConst.EroomPanel,ERoomPanel),r.register(PanelConst.SetPanel,SetPanel),r.register(PanelConst.PayPanel,PayPanel),r.register(PanelConst.MsgPanel,MessagePanel),r.register(PanelConst.RulePanel,RulePanel),r.register(PanelConst.ScorePanel,ScorePanel),r.register(PanelConst.PersionInfoPanel,PersionInfoPanel),this.addEvent(t.EVENT_NATIVE_SHAKE,this.nativeShake,this),this.addEvent(t.EVENT_SET_WEB_WXSHARE,this.setWebWxShare,this),this.addEvent(t.EVENT_NATIVE_WXSHARE,this.nativeWxShare,this),this.sendEvent(LoginController.EVENT_SHOW_LOGIN)
},t.prototype.setInterfaces=function(){egret.ExternalInterface.addCallback("quitApp",function(e){console.log("message form native : "+e);var o=t.MsgBoxManager.getBoxA();o.showMsg("是否关闭游戏"),o.ok=function(){egret.ExternalInterface.call("quitApp","quitApp")}}),egret.ExternalInterface.addCallback("getCode",function(e){Tips.info("egret get code: "+e),e?egret.setTimeout(function(){t.getController(LoginController.NAME)},this,10):Tips.error("code is null")})},t.prototype.nativeWxShare=function(e){egret.ExternalInterface.call("wxShare","http://gamemj.com/mj/index.php?pid="+t.DataCenter.UserInfo.getMyUserVo().id+"&deskCode="+t.DataCenter.deskInfo.deskCode+"&deskId="+t.DataCenter.deskInfo.deskID+"&gameID="+t.serverSocket.gameID)},t.prototype.nativeShake=function(e){void 0===e&&(e=1500),egret.ExternalInterface.call("shake",e+"")},t.prototype.setWebWxShare=function(e,o,n,r){var i=t.serverSocket.gameID;console.log("调用微信分享,deskCode="+o+" userID="+e+" replayCode="+n+" gameID="+i),window.wxShare&&window.wxShare(e,o,n,i,r)},t.getController=function(e){return t.getInstance().getController(e)},Object.defineProperty(t,"DataCenter",{get:function(){return DataCenter.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DeviceUtils",{get:function(){return DeviceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StageUtils",{get:function(){return StageUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ResUtils",{get:function(){return ResUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LayerManager",{get:function(){return LayerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SoundManager",{get:function(){return SoundManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PopUpManager",{get:function(){return PopUpManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MsgBoxManager",{get:function(){return MessageBoxManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BottomMenuManager",{get:function(){return BottomMenuManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EventManager",{get:function(){return EventMananger.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LoadingLock",{get:function(){return LoadingLock.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PanelManager",{get:function(){return PanelManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SceneManager",{get:function(){return SceneManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"gameSocket",{get:function(){return SocketManager.getInstance().gameSocket},enumerable:!0,configurable:!0}),Object.defineProperty(t,"serverSocket",{get:function(){return SocketManager.getInstance().serverSocket},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pushSocket",{get:function(){return SocketManager.getInstance().pushSocket},enumerable:!0,configurable:!0}),t}(BaseApp);App.EVENT_NATIVE_SHAKE="EVENT_NATIVE_SHAKE",App.EVENT_SET_WEB_WXSHARE="EVENT_SET_WEB_WXSHARE",App.EVENT_NATIVE_WXSHARE="EVENT_NATIVE_WXSHARE",__reflect(App.prototype,"App");var AssetConst=function(){function e(){}return e}();AssetConst.Preload="preload",AssetConst.Invite="invite",AssetConst.Game="game",AssetConst.ActFace="actface",AssetConst.Share="share",AssetConst.Voice="voice",AssetConst.Replay="replay",AssetConst.Sound_GuangDong="sound_guangdong",AssetConst.Sound_PuTong="sound_putong",AssetConst.Sound_Other="sound_other",AssetConst.Sound_BGM="sound_bgm",AssetConst.Login="login",AssetConst.Bag="bag",AssetConst.Create="create",AssetConst.Email="email",AssetConst.Feedback="feedback",AssetConst.Rank="rank",AssetConst.Rule="rule",AssetConst.Score="score",AssetConst.HallShare="hall_share",AssetConst.Shop="shop",AssetConst.Sign="sign",AssetConst.Lucky="lucky",AssetConst.Fuli="fuli",AssetConst.Jjj="jjj",AssetConst.Result="result",AssetConst.Chat="chat",AssetConst.Card="card",AssetConst.Common="common",AssetConst.ChatFace="chatFace",AssetConst.PanelTitle="弹框标题",AssetConst.InputRoom="input_room",AssetConst.SetPanel="set",AssetConst.ExcRoom="exroom",AssetConst.Qrcode="qrcode",__reflect(AssetConst.prototype,"AssetConst");var EventConst=function(){function e(){}return e}();EventConst.SocketConnect="SocketConnect",EventConst.StartReconnect="StartReconnect",EventConst.SocketNotConnect="SocketNotConnect",EventConst.SocketIOError="SocketIOError",EventConst.SocketClose="SocketClose",EventConst.GameStateChange="GameStateChange",EventConst.GameConfigChange="GameConfigChange",__reflect(EventConst.prototype,"EventConst");var PanelConst;!function(e){e[e.RulePanel=0]="RulePanel",e[e.CreateRoomPanel=1]="CreateRoomPanel",e[e.PreloadPanel=2]="PreloadPanel",e[e.ScorePanel=3]="ScorePanel",e[e.MsgPanel=4]="MsgPanel",e[e.SetPanel=5]="SetPanel",e[e.PersionInfoPanel=6]="PersionInfoPanel",e[e.CroomPanle=7]="CroomPanle",e[e.EroomPanel=8]="EroomPanel",e[e.PayPanel=9]="PayPanel"}(PanelConst||(PanelConst={}));var SceneConst;!function(e){e[e.PreloadScene=0]="PreloadScene",e[e.LoginScene=1]="LoginScene",e[e.HallScene=2]="HallScene",e[e.GameScene=3]="GameScene"}(SceneConst||(SceneConst={}));var BagInfo=function(){function e(){this.sceneGroupList=[],this.scenePngList=[],this.init()}return e.prototype.init=function(){this.act=ItemType["default"],this.face=ItemType["default"],this.scene=ItemType["default"],this.initScene()},e.prototype.initScene=function(){this.sceneGroupList=["defaultScene","youselfScene","vipScene"],this.scenePngList=["game_bg_jpg","game_bg_jpg","game_bg_jpg"];for(var e=this.sceneGroupList.length,t=0;e>t;t++)RES.createGroup(this.sceneGroupList[t],[this.scenePngList[t]])},e.prototype.getSceneGroupName=function(){return this.sceneGroupList[this.scene]},e.prototype.getScenePngName=function(){return this.scenePngList[this.scene]},e}();__reflect(BagInfo.prototype,"BagInfo");var ItemType;!function(e){e[e["default"]=0]="default",e[e.youself=1]="youself",e[e.vip=2]="vip"}(ItemType||(ItemType={}));var ColorInfo=function(){function e(){this.LoseRed=15467282,this.WinGreen=4908864}return e}();__reflect(ColorInfo.prototype,"ColorInfo");var DebugInfo=function(){function e(){this.password="112233"}return Object.defineProperty(e.prototype,"isDebug",{get:function(){return null!=egret.getOption("debug")&&""!=egret.getOption("debug")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLocalPhp",{get:function(){return parseInt(egret.getOption("local"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"account",{get:function(){return"test"+egret.getOption("debug")},enumerable:!0,configurable:!0}),e}();__reflect(DebugInfo.prototype,"DebugInfo");var DeskInfo=function(){function e(){this.deskID=0,this.ownerID=0,this.deskCode=0,this.basePoint=0,this.deskLevel=0,this.chip=0,this.deskNo=0,this.isGameRunning=!1,this.isPlaying=!1,this.ownerName="",this.peoplecount=0,this.playCount=0}return e.prototype.readData=function(e){this.deskID=e.deskID,this.ownerID=e.ownerID,this.deskCode=e.deskCode,this.gameID=e.gameid,this.deskLevel=e.deskLevel,this.chip=e,this.curPlayCount=e,this.curSitPeopleCoiunt=e,this.deposit=e.deposit,this.deskDesc=e.deskDesc,this.deskName=e.deskName,this.deskNo=e.deskNo,this.isGameRunning=e.isGameRunning,this.isPlaying=e.isPlaying,this.ownerName=e.ownerName,this.peoplecount=e.peoplecount,this.playCount=e.playCount,this.gameConfig=e.gameConfig,e.basepoint?this.basePoint=e.basepoint:e.basePoint&&(this.basePoint=e.basePoint)},e}();__reflect(DeskInfo.prototype,"DeskInfo");var ErrorCode;!function(e){function t(e,t){var o=e+(t?"_"+t.toString():"");return n[o]?n[o]:"未定义的错误码:"+o}function o(e){return r[e]}var n=[],r=[];n["100_3_9"]="当前session被占用",n["100_3_3"]="密码错误",n["100_3_19"]="没有登录Z服务器",n["104_1_1_1"]="开房卡不足",n["104_1_1_2"]="桌子数达到上限",n["104_1_1_3"]="创建数量达到上限",n["104_1_1_4"]="暗号已存在或为空",n["102_4_1_1"]="房间不存在，请确认所输入的房间号是否正确",n["102_4_1_2"]="房间人满",n["102_4_1_3"]="金币不足",n["102_4_1_4"]="位置上已经有人",n["102_4_1_5"]="XXX太多",n["102_4_1_-3"]="资金与约定金不足!",n["102_4_1_-11"]="被房主踢出!",n["102_4_1_-12"]="强退了其他房间!",n["102_4_1_-13"]="人满!",n["102_4_1_-14"]="房主不在线!",n["102_4_1_-15"]="房间已过期，请续费!",n["102_4_1_-11"]="你被房主请离房间，3分钟不能进入。",n["102_4_1_-12"]="你强退了其他房间，所以不能进入",n["102_4_1_-13"]="房间人员已满，不能加入房间",n["104_2_1"]="房间不存在，请确认所输入的房间号是否正确",n["102_11_1"]="无空闲的桌子",r["100_5_0"]="登录",r["100_3_9"]="当前session被占用",r["100_3_3"]="密码错误",r["100_3_19"]="没有登录Z服务器",r["100_2_1"]="登陆成功",r["104_1_0"]="创建房间",r["104_1_1"]="创建房间返回",r["104_2_0"]="查找房间",r["104_2_1"]="查找房间返回",r["104_4_0"]="通知桌子结束",r["104_4_1"]="通知房主房间结束",r["102_4_0"]="进入房间",r["102_4_1"]="进入房间返回",r["102_5_0"]="退出房间",r["102_5_1"]="广播退出房间",r["180_51_0"]="获取庄家位置(游戏开始)",r["180_52_0"]="发牌",r["180_53_0"]="玩家摸牌(杠)",r["180_54_0"]="玩家请求操作",r["180_55_0"]="玩家叫牌",r["180_56_0"]="响应玩家操作",r["180_57_0"]="通知玩家出牌(吃碰牌后通知出牌)",r["180_58_0"]="游戏结算",e.getCodeText=t,e.cn=o}(ErrorCode||(ErrorCode={}));var GameInfo=function(){function e(){this.Chat_Msg=["大家好，很高兴见到各位！","快点吧,我等到花儿都谢了！","不要走，决战到天亮！","你是帅哥还是美女啊？","君子报仇，十盘不算晚!","快放炮啊，我都等得不耐烦了。","真不好意思，又胡了。","打错了...呜呜呜"],this.huTypeList=["","鸡胡","平胡","自摸","风位","风圈","三元牌","三元牌","三元牌","碰碰胡","混一色","一炮三响","杠上开花","海底捞月","清一色","混碰","清碰","混幺九","小三元","小四喜","字一色","清幺九","大三元","大四喜","九莲宝灯","十三幺","抢杠胡","天胡","人胡","地胡","小胡","无鬼","杠上开花","满鬼","清一色","字一色","七对子","四暗刻","十八罗汉","大三元","小四喜","大四喜","十三幺","抢杠胡","杠牌加番"],this.BaoSanJia=["杠上开花包杠","12张落地","大三元包自摸","大四喜包自摸","抢杠胡"],this.playTypeList=[MJ_TYPE.MJTYPE_JIPINGHU_FENG_WEI,MJ_TYPE.MJTYPE_JIPINGHU_FENG_QUAN,MJ_TYPE.MJTYPE_JIPINGHU_JIAN_ZHONG,MJ_TYPE.MJTYPE_JIPINGHU_JIAN_BAI,MJ_TYPE.MJTYPE_JIPINGHU_JIAN_FA,MJ_TYPE.MJTYPE_JIPINGHU_YI_PAO_SAN_XIANG,MJ_TYPE.MJTYPE_JIPINGHU_GANG_SHANG_KAI_HUA,MJ_TYPE.MJTYPE_JIPINGHU_HAI_DI_LAO_YUE,MJ_TYPE.MJTYPE_JIPINGHU_QIANG_GANG_HU,MJ_TYPE.MJTYPE_TUIDAOHU_GANG_SHANG_KAI_HUA,MJ_TYPE.MJTYPE_TUIDAOHU_QIANG_GANG,MJ_TYPE.MJTYPE_JIPINGHU_GANG_ADD_FAN]}return e}();__reflect(GameInfo.prototype,"GameInfo");var ACT_state;!function(e){e[e.Act_Pass=1]="Act_Pass",e[e.Act_NormalDo=2]="Act_NormalDo",e[e.Act_Ting=4]="Act_Ting",e[e.Act_Chi=8]="Act_Chi",e[e.Act_Peng=16]="Act_Peng",e[e.Act_Gang=32]="Act_Gang",e[e.Act_AnGang=64]="Act_AnGang",e[e.Act_Hu=128]="Act_Hu"}(ACT_state||(ACT_state={}));var ACT_act;!function(e){e[e.Act_ChangeCard=-2]="Act_ChangeCard",e[e.Act_GetCard=-1]="Act_GetCard",e[e.Act_Pass=0]="Act_Pass",e[e.Act_NormalDo=1]="Act_NormalDo",e[e.Act_Ting=2]="Act_Ting",e[e.Act_Chi=3]="Act_Chi",e[e.Act_Peng=4]="Act_Peng",e[e.Act_Gang=5]="Act_Gang",e[e.Act_AnGang=6]="Act_AnGang",e[e.Act_Hu=7]="Act_Hu",e[e.Act_zimo=8]="Act_zimo"}(ACT_act||(ACT_act={}));var MJ_TYPE;!function(e){e[e.MJTYPE_JIPINGHU_JI_HU=1]="MJTYPE_JIPINGHU_JI_HU",e[e.MJTYPE_JIPINGHU_PING_HU=2]="MJTYPE_JIPINGHU_PING_HU",e[e.MJTYPE_JIPINGHU_ZI_MO=3]="MJTYPE_JIPINGHU_ZI_MO",e[e.MJTYPE_JIPINGHU_FENG_WEI=4]="MJTYPE_JIPINGHU_FENG_WEI",e[e.MJTYPE_JIPINGHU_FENG_QUAN=5]="MJTYPE_JIPINGHU_FENG_QUAN",e[e.MJTYPE_JIPINGHU_JIAN_ZHONG=6]="MJTYPE_JIPINGHU_JIAN_ZHONG",e[e.MJTYPE_JIPINGHU_JIAN_BAI=7]="MJTYPE_JIPINGHU_JIAN_BAI",e[e.MJTYPE_JIPINGHU_JIAN_FA=8]="MJTYPE_JIPINGHU_JIAN_FA",e[e.MJTYPE_JIPINGHU_PENG_PENG_HU=9]="MJTYPE_JIPINGHU_PENG_PENG_HU",e[e.MJTYPE_JIPINGHU_HUN_YI_SE=10]="MJTYPE_JIPINGHU_HUN_YI_SE",e[e.MJTYPE_JIPINGHU_YI_PAO_SAN_XIANG=11]="MJTYPE_JIPINGHU_YI_PAO_SAN_XIANG",e[e.MJTYPE_JIPINGHU_GANG_SHANG_KAI_HUA=12]="MJTYPE_JIPINGHU_GANG_SHANG_KAI_HUA",e[e.MJTYPE_JIPINGHU_HAI_DI_LAO_YUE=13]="MJTYPE_JIPINGHU_HAI_DI_LAO_YUE",e[e.MJTYPE_JIPINGHU_QING_YI_SE=14]="MJTYPE_JIPINGHU_QING_YI_SE",e[e.MJTYPE_JIPINGHU_HUN_PENG=15]="MJTYPE_JIPINGHU_HUN_PENG",e[e.MJTYPE_JIPINGHU_QING_PENG=16]="MJTYPE_JIPINGHU_QING_PENG",e[e.MJTYPE_JIPINGHU_HUN_YAO_JIU=17]="MJTYPE_JIPINGHU_HUN_YAO_JIU",e[e.MJTYPE_JIPINGHU_XIAO_SAN_YUAN=18]="MJTYPE_JIPINGHU_XIAO_SAN_YUAN",e[e.MJTYPE_JIPINGHU_XIAO_SI_XI=19]="MJTYPE_JIPINGHU_XIAO_SI_XI",e[e.MJTYPE_JIPINGHU_ZI_YI_SE=20]="MJTYPE_JIPINGHU_ZI_YI_SE",e[e.MJTYPE_JIPINGHU_QING_YAO_JIU=21]="MJTYPE_JIPINGHU_QING_YAO_JIU",e[e.MJTYPE_JIPINGHU_DA_SAN_YUAN=22]="MJTYPE_JIPINGHU_DA_SAN_YUAN",e[e.MJTYPE_JIPINGHU_DA_SI_XI=23]="MJTYPE_JIPINGHU_DA_SI_XI",e[e.MJTYPE_JIPINGHU_JIU_LIAN_BAO_DENG=24]="MJTYPE_JIPINGHU_JIU_LIAN_BAO_DENG",e[e.MJTYPE_JIPINGHU_SHI_SAN_YAO=25]="MJTYPE_JIPINGHU_SHI_SAN_YAO",e[e.MJTYPE_JIPINGHU_QIANG_GANG_HU=26]="MJTYPE_JIPINGHU_QIANG_GANG_HU",e[e.MJTYPE_JIPINGHU_TIAN_HU=27]="MJTYPE_JIPINGHU_TIAN_HU",e[e.MJTYPE_JIPINGHU_REN_HU=28]="MJTYPE_JIPINGHU_REN_HU",e[e.MJTYPE_JIPINGHU_DI_HU=29]="MJTYPE_JIPINGHU_DI_HU",e[e.MJTYPE_TUIDAOHU_BASE_TYPE=30]="MJTYPE_TUIDAOHU_BASE_TYPE",e[e.MJTYPE_TUIDAOHU_WU_ONI=31]="MJTYPE_TUIDAOHU_WU_ONI",e[e.MJTYPE_TUIDAOHU_GANG_SHANG_KAI_HUA=32]="MJTYPE_TUIDAOHU_GANG_SHANG_KAI_HUA",e[e.MJTYPE_TUIDAOHU_MAN_ONI=33]="MJTYPE_TUIDAOHU_MAN_ONI",e[e.MJTYPE_TUIDAOHU_QING_YI_SE=34]="MJTYPE_TUIDAOHU_QING_YI_SE",e[e.MJTYPE_TUIDAOHU_ZI_YI_SE=35]="MJTYPE_TUIDAOHU_ZI_YI_SE",e[e.MJTYPE_TUIDAOHU_QI_DUI_ZI=36]="MJTYPE_TUIDAOHU_QI_DUI_ZI",e[e.MJTYPE_TUIDAOHU_SI_AN_KE=37]="MJTYPE_TUIDAOHU_SI_AN_KE",e[e.MJTYPE_TUIDAOHU_SHI_BA_LOU_HAN=38]="MJTYPE_TUIDAOHU_SHI_BA_LOU_HAN",e[e.MJTYPE_TUIDAOHU_DA_SAN_YUAN=39]="MJTYPE_TUIDAOHU_DA_SAN_YUAN",e[e.MJTYPE_TUIDAOHU_XIAO_SI_XI=40]="MJTYPE_TUIDAOHU_XIAO_SI_XI",e[e.MJTYPE_TUIDAOHU_DA_SI_XI=41]="MJTYPE_TUIDAOHU_DA_SI_XI",e[e.MJTYPE_TUIDAOHU_SHI_SAN_YAO=42]="MJTYPE_TUIDAOHU_SHI_SAN_YAO",e[e.MJTYPE_TUIDAOHU_QIANG_GANG=43]="MJTYPE_TUIDAOHU_QIANG_GANG",e[e.MJTYPE_JIPINGHU_GANG_ADD_FAN=44]="MJTYPE_JIPINGHU_GANG_ADD_FAN"}(MJ_TYPE||(MJ_TYPE={}));var GS_GAME_STATION;!function(e){e[e.GS_WAIT_SETGAME=0]="GS_WAIT_SETGAME",e[e.GS_WAIT_ARGEE=1]="GS_WAIT_ARGEE",e[e.GS_GAME_PLAYING=2]="GS_GAME_PLAYING",e[e.GS_GAME_FINSHED=3]="GS_GAME_FINSHED"}(GS_GAME_STATION||(GS_GAME_STATION={}));var GAME_TYPE;!function(e){e[e.JI_PING_HU=1]="JI_PING_HU",e[e.TUI_DAO_HU=2]="TUI_DAO_HU"}(GAME_TYPE||(GAME_TYPE={}));var MJ_CARD_VAL;!function(e){e[e.BLACK=0]="BLACK",e[e.WAN_1=17]="WAN_1",e[e.WAN_2=18]="WAN_2",e[e.WAN_3=19]="WAN_3",e[e.WAN_4=20]="WAN_4",e[e.WAN_5=21]="WAN_5",e[e.WAN_6=22]="WAN_6",e[e.WAN_7=23]="WAN_7",e[e.WAN_8=24]="WAN_8",e[e.WAN_9=25]="WAN_9",e[e.TIAO_1=33]="TIAO_1",e[e.TIAO_2=34]="TIAO_2",e[e.TIAO_3=35]="TIAO_3",e[e.TIAO_4=36]="TIAO_4",e[e.TIAO_5=37]="TIAO_5",e[e.TIAO_6=38]="TIAO_6",e[e.TIAO_7=39]="TIAO_7",e[e.TIAO_8=40]="TIAO_8",e[e.TIAO_9=41]="TIAO_9",e[e.BING_1=49]="BING_1",e[e.BING_2=50]="BING_2",e[e.BING_3=51]="BING_3",e[e.BING_4=52]="BING_4",e[e.BING_5=53]="BING_5",e[e.BING_6=54]="BING_6",e[e.BING_7=55]="BING_7",e[e.BING_8=56]="BING_8",e[e.BING_9=57]="BING_9",e[e.FENG_DONG=65]="FENG_DONG",e[e.FENG_NAN=66]="FENG_NAN",e[e.FENG_XI=67]="FENG_XI",e[e.FENG_BEI=68]="FENG_BEI",e[e.JIAN_ZHONG=81]="JIAN_ZHONG",e[e.JIAN_FA=82]="JIAN_FA",e[e.JIAN_BAI=83]="JIAN_BAI",e[e.HUA_CHUN=97]="HUA_CHUN",e[e.HUA_XIA=98]="HUA_XIA",e[e.HUA_QOU=99]="HUA_QOU",e[e.HUA_DONG=100]="HUA_DONG",e[e.HUA_MEI=101]="HUA_MEI",e[e.HUA_LAN=102]="HUA_LAN",e[e.HUA_ZHU=103]="HUA_ZHU",e[e.HUA_JU=104]="HUA_JU"}(MJ_CARD_VAL||(MJ_CARD_VAL={}));var PLAYER_STATE;!function(e){e[e.TRSHIP=1]="TRSHIP",e[e.ESC=2]="ESC",e[e.READY=4]="READY",e[e.SETTLE=8]="SETTLE"}(PLAYER_STATE||(PLAYER_STATE={}));var UserPosition;!function(e){e[e.NULL=-1]="NULL",e[e.Down=0]="Down",e[e.R=1]="R",e[e.Up=2]="Up",e[e.L=3]="L"}(UserPosition||(UserPosition={}));var CHAT_TYPE;!function(e){e[e.Common=0]="Common",e[e.Face=1]="Face",e[e.Text=2]="Text",e[e.Voice=3]="Voice"}(CHAT_TYPE||(CHAT_TYPE={}));var SEX_TYPE;!function(e){e[e.boy=1]="boy",e[e.girl=2]="girl",e[e.unknow=3]="unknow"}(SEX_TYPE||(SEX_TYPE={}));var MJ_FENG_POINT;!function(e){e[e.DONG=1]="DONG",e[e.NAN=2]="NAN",e[e.XI=3]="XI",e[e.BEI=4]="BEI"}(MJ_FENG_POINT||(MJ_FENG_POINT={}));var ACT_FACE;!function(e){e[e.Boom=1]="Boom",e[e.FanQie=2]="FanQie",e[e.Stone=3]="Stone",e[e.Zan=4]="Zan",e[e.Kiss=5]="Kiss",e[e.Flower=6]="Flower"}(ACT_FACE||(ACT_FACE={}));var MJ_BAO_SAN_JIA_TYPE;!function(e){e[e.BAO_SAN_JIA_TYPE_GANG_KAI=0]="BAO_SAN_JIA_TYPE_GANG_KAI",e[e.BAO_SAN_JIA_TYPE_12=1]="BAO_SAN_JIA_TYPE_12",e[e.BAO_SAN_JIA_TYPE_DA_SAN_YUAN=2]="BAO_SAN_JIA_TYPE_DA_SAN_YUAN",e[e.BAO_SAN_JIA_TYPE_DA_SI_XI=3]="BAO_SAN_JIA_TYPE_DA_SI_XI",e[e.BAO_SAN_JIA_TYPE_QIANG_GANG=4]="BAO_SAN_JIA_TYPE_QIANG_GANG"}(MJ_BAO_SAN_JIA_TYPE||(MJ_BAO_SAN_JIA_TYPE={}));var Game_ID;!function(e){e[e.CardRoom=99999999]="CardRoom",e[e.GoldRoom=99999997]="GoldRoom",e[e.selfRoom=99999995]="selfRoom"}(Game_ID||(Game_ID={}));var Room_Level;!function(e){e[e.Level1=1]="Level1",e[e.Level2=2]="Level2",e[e.Level3=3]="Level3",e[e.Level4=4]="Level4"}(Room_Level||(Room_Level={}));var Server_Type;!function(e){e[e.createRoom=1]="createRoom",e[e.joinRoom=2]="joinRoom"}(Server_Type||(Server_Type={}));var KickCause;!function(e){e[e.PREPARE_TIME_OUT=1]="PREPARE_TIME_OUT",e[e.MONEY_TOO_LITTLE=2]="MONEY_TOO_LITTLE",e[e.MONEY_TOO_MORE=3]="MONEY_TOO_MORE"}(KickCause||(KickCause={}));var GameState;!function(e){e[e.Free=0]="Free",e[e.Ready=1]="Ready",e[e.DealCard=2]="DealCard",e[e.Playing=3]="Playing",e[e.GameOver=4]="GameOver",e[e.Replay=5]="Replay"}(GameState||(GameState={}));var ExRoomInformation={deskCode:0,hasYiPaoSanXiang:"一炮三响",hasHaiDiLaoYue:"海底捞月",hasMaiMa:"买马",hasFengQuan:"风位风圈刻子",hasFengWei:"风位刻子",hasSanYuan:"三元牌",hasGangAddFan:"杠牌加番",hasQiangGang:"抢杠",hasBuBuGao:"步步高",hasGangShangKaiHua:"杠上开花",vipDate:0,timelimit:"",basePoint:0,deposit:0,ownerName:"",playCount:0,chip:0},GoldRoomInfo=function(){function e(){this.infoList=[]}return e.prototype.readData=function(e){for(var t=e.length,o=0;t>o;o++){var n=ProtocolHttp.GoldRoomJson;n=e[o],n.versusroomcfg=JSON.parse(e[o].versusroomcfg),this.infoList.push(n)}},e.prototype.getData=function(e,t){for(var o=this.infoList.length,n=0;o>n;n++){var r=this.infoList[n];if(r.GameID==e+""&&r.level==t+"")return r}return null},e}();__reflect(GoldRoomInfo.prototype,"GoldRoomInfo");var MarqueeInfo=function(){function e(){this.init()}return e.prototype.init=function(){this.gameMarquee=["%1【%2】的%3牌技果然精湛，竟然以%4结束了这场牌局！","%1【%2】的%3出其不意的以%4力压群雄！","%1【%2】惊现%4牌型,%3在牌技的道路上又更近了一步！"],this.messageMarquee=[]},e.prototype.setMsgMarquee=function(e){for(var t=0;t<e.length;t++)this.messageMarquee.push(e[t].content)},e.prototype.getGameMqrquee=function(e,t,o,n){var r=this.gameMarquee[NumberTool.getRandInt(0,this.gameMarquee.length-1)];return r=r.replace("%1",decodeURIComponent(e)),r=r.replace("%2",t.toString()),r=r.replace("%3",o),r=r.replace("%4",n)},e}();__reflect(MarqueeInfo.prototype,"MarqueeInfo");var ReplayInfo=function(){function e(){this.bReplay=!1}return e}();__reflect(ReplayInfo.prototype,"ReplayInfo");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,o,n){function r(e){t.call(n,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),o.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ServerInfo=function(){function e(){this.GAME_SERVER="ws://118.89.22.251:3350",this.WX_URL=""}return Object.defineProperty(e.prototype,"WEB_URL",{get:function(){return"http://192.168.1.192/majapi/api.php"},enumerable:!0,configurable:!0}),e}();__reflect(ServerInfo.prototype,"ServerInfo");var ShareInfo=function(){function e(){}return Object.defineProperty(e.prototype,"deskCode",{get:function(){var e=egret.getOption("deskCode");return e&&""!=e?e:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"replayCode",{get:function(){return egret.getOption("replayCode")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pidID",{get:function(){return egret.getOption("pid")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userID",{get:function(){return egret.getOption("uid")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deskId",{get:function(){return egret.getOption("deskId")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverType",{get:function(){var e=egret.getOption("serverType");return e?parseInt(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameID",{get:function(){var e=egret.getOption("gameID");return e?parseInt(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomId",{get:function(){return egret.getOption("roomId")},enumerable:!0,configurable:!0}),e}();__reflect(ShareInfo.prototype,"ShareInfo");var ShopInfo=function(){function e(){}return e}();__reflect(ShopInfo.prototype,"ShopInfo");var ShopType;!function(e){e[e.Diamon=1]="Diamon",e[e.Item=2]="Item",e[e.Vip=7]="Vip",e[e.Gold=8]="Gold",e[e.ReNew=9]="ReNew",e[e.OpenDesk=10]="OpenDesk"}(ShopType||(ShopType={}));var SignInfo=function(){function e(){this.signMax=7,this.signInCount=0}return e}();__reflect(SignInfo.prototype,"SignInfo");var UserInfo=function(){function e(){this.userList={}}return e.prototype.addUser=function(e){this.userList[e.id]?console.log("用户重复添加:",e.id):this.userList[e.id]=e},e.prototype.getMyUserVo=function(){return this.getUser(this.httpUserInfo.id)},e.prototype.setMyUserVo=function(){this.httpUserInfo=new UserVO;var e=egret.getOption("play");if(e){var t=JSON.parse(e);this.httpUserInfo.banker=t.banker,this.httpUserInfo.headImgUrl=t.headImgUrl,this.httpUserInfo.id=t.id,this.httpUserInfo.nickname=t.nickname,this.httpUserInfo.playerId=t.playerId,this.httpUserInfo.roomCard=t.roomCard,this.httpUserInfo.roomId=t.roomId,this.httpUserInfo.status=t.status}},e.prototype.getUser=function(e){return this.userList[e]},e.prototype.isExist=function(e){return this.getUser(e)?!0:!1},e.prototype.getUserBySeatID=function(e){for(var t in this.userList)if(this.userList[t].seatID==e)return this.userList[t]},e.prototype.deleteUser=function(e){delete this.userList[e]},e.prototype.deleteAllUserExcptMe=function(){for(var e in this.userList)parseInt(e)!=this.httpUserInfo.id&&delete this.userList[e]},e.prototype.deleteAllUser=function(){for(var e in this.userList)delete this.userList[e]},e.prototype.getUserNum=function(){return ArrayTool.getObjectLength(this.userList)},e}();__reflect(UserInfo.prototype,"UserInfo");var WelfareInfo=function(){function e(){this.benefit_cnt=0,this.benefitMax=3,this.benefitflag=0,this.broke_money=0}return e.prototype.isCanApply=function(){return!0},e}();__reflect(WelfareInfo.prototype,"WelfareInfo");var WxInfo=function(){function e(){this.yetDeskCode=!0}return e}();__reflect(WxInfo.prototype,"WxInfo");var DataCenter=function(e){function t(){var t=e.call(this)||this;return t.UserInfo=new UserInfo,t.ServerInfo=new ServerInfo,t.GameInfo=new GameInfo,t.BagInfo=new BagInfo,t.signInfo=new SignInfo,t.welfareInfo=new WelfareInfo,t.debugInfo=new DebugInfo,t.replayInfo=new ReplayInfo,t.shareInfo=new ShareInfo,t.wxInfo=new WxInfo,t.deskInfo=new DeskInfo,t.colorInfo=new ColorInfo,t.goldRoomInfo=new GoldRoomInfo,t.roomInfo=new RoomInfo,t.marqueeInfo=new MarqueeInfo,t}return __extends(t,e),t}(SingleClass);__reflect(DataCenter.prototype,"DataCenter");var ProtocolData=function(){function e(){}return e}();ProtocolData.commond={cmd:"",game:""},ProtocolData.gameId={normal:0,variety:1,thirteenth:2,hall:-1},ProtocolData.sendLogin={cmd:"1",game:"-1",msg:[{openId:"owUlNw9vcKUUlqxxSYg54i1ATAsc",nickname:"等风来"}]},ProtocolData.revLogin={cmd:2,game:-1,msg:[]},ProtocolData.cmd6={cmd:"6",msg:[{roomId:""}]},ProtocolData.cmd3={cmd:"3",game:"",msg:[{level:" "}]},__reflect(ProtocolData.prototype,"ProtocolData");var ProtocolHead=function(){function e(){}return e}();ProtocolHead.SendCmd1="cmd1",ProtocolHead.RevCmd2="cmd2",ProtocolHead.SendCmd3="cmd3",ProtocolHead.RevCmd4="cmd4",ProtocolHead.RevCmd5="cmd5",ProtocolHead.SendCmd6="cmd6",ProtocolHead.RevCmd7="cmd7",ProtocolHead.RevCmd8="cmd8",ProtocolHead.SendCmd9="cmd9",ProtocolHead.SendCmd10="cmd10",ProtocolHead.RevCmd39="cmd39",ProtocolHead.SendCmd41="cmd41",ProtocolHead.RevCmd41="cmd41",ProtocolHead.SendCmd42="cmd42",ProtocolHead.RevCmd42="cmd42",__reflect(ProtocolHead.prototype,"ProtocolHead");var ProtocolHttp=function(){function e(){}return e}();ProtocolHttp.httpHead={ver:"1.6.1",AssetID:1,mainID:100},ProtocolHttp.rev_z_login={ret:0,desc:"",action:"",mainID:0,AssetID:0,data:{hadinvited:1,deskTime:"",user:"",name:"",sex:-1,skey:"",avater_url:"",password:"",is_overtime:0,last_ip:"",uid:0,ip:"",port:"",prushport:"",excluroom_name:"",excluroom_code:""}},ProtocolHttp.send_z_login={action:"Login",param:{}},ProtocolHttp.send_z_loginweixin={action:"LoginWeiXin",param:{code:""}},ProtocolHttp.send_z_loginapp={action:"LoginApp",param:{code:"",refToken:""}},ProtocolHttp.send_z_godrank={action:"Billboard",param:{playerID:0}},ProtocolHttp.send_z_richrank={action:"Wealthboard",param:{playerID:0}},ProtocolHttp.send_z_scorerank={action:"Integrationboard",param:{playerID:0}},ProtocolHttp.send_z_avard={action:"Receiveprize",skey:"74db1b6807182ffa1bf7a04cbc6a4562",uid:0,param:[]},ProtocolHttp.send_z_combat={action:"CombatGains",param:{playerID:0}},ProtocolHttp.send_z_combatdetail={action:"CombatGainsdetail",param:{deskno:0,buildDate:0,playerID:0,roomid:0}},ProtocolHttp.send_z_feedback={skey:"",uid:0,action:"Feedbacks",param:{content:""}},ProtocolHttp.send_z_buyprop={action:"BuyProp",skey:"",uid:0,param:{propid:0}},ProtocolHttp.send_z_buypayment={action:"Payment",skey:"",uid:0,param:{}},ProtocolHttp.get_z_back={action:"GetBackpack",skey:"",uid:0,param:{}},ProtocolHttp.send_z_goodsList={action:"GoodsList",skey:"",uid:0,param:{type:0}},ProtocolHttp.send_z_marquee={action:"Marquee",param:[]},ProtocolHttp.send_z_replayCombatGain={action:"ReplayCombatGain",skey:"",uid:0,param:{replaycode:0}},ProtocolHttp.send_z_Pay={action:"ApplyABPay",skey:"",uid:0,param:{goodsid:0,pay_type:0}},ProtocolHttp.send_z_emailList={action:"GetEmailByUser",skey:"",uid:0,param:[]},ProtocolHttp.send_z_emailDetail={action:"ReadEmail",skey:"",uid:0,param:{eid:0}},ProtocolHttp.send_z_getEmailGoods={action:"ReceiveEmail",skey:"",uid:0,param:{eid:0}},ProtocolHttp.send_z_getAllEmailGoods={action:"ReceiveEmail",skey:"",uid:0,param:[]},ProtocolHttp.send_z_delAllEmail={action:"OneKeyDel",skey:"",uid:0,param:[]},ProtocolHttp.send_z_checkMail={action:"CheckMail",skey:"",uid:0,param:[]},ProtocolHttp.send_z_checkShareAward={action:"CheckShare",skey:"",uid:0,param:[]},ProtocolHttp.send_z_signInList={action:"SignInPriceList",skey:"",uid:0,param:[]},ProtocolHttp.send_z_signInDetail={action:"SignInPricedetail",skey:"",uid:0,param:{id:0}},ProtocolHttp.send_z_lotteryList={action:"LotteryDrawList",skey:"",uid:0,param:[]},ProtocolHttp.send_z_lotteryDetail={action:"LotteryDrawDetail",skey:"",uid:0,param:[]},ProtocolHttp.send_z_bag={action:"BackPack",skey:"",uid:0,param:{type:0}},ProtocolHttp.send_z_shareCount={action:"ShareCount",skey:"",uid:0,param:[]},ProtocolHttp.send_z_shareDetial={action:"ShareDetail",skey:"",uid:0,param:{mid:0,type:0,sharenum:0}},ProtocolHttp.send_z_one_insertShare={action:"InsertShare",skey:"",uid:0,param:{pid:0,sid:0}},ProtocolHttp.send_z_InsertShare={action:"UpdateShare",skey:"",uid:0,param:{}},ProtocolHttp.aibData={transId:"",retFunc:"callback"},ProtocolHttp.send_z_CheckVip={action:"CheckVip",skey:"",uid:0,param:[]},ProtocolHttp.send_z_WelfareList={action:"WelfareList",skey:"",uid:0,param:[]},ProtocolHttp.send_z_AlmsList={action:"AlmsList",skey:"",uid:0,param:[]},ProtocolHttp.send_z_openVip={action:"ApplyABPay",skey:"",uid:0,param:{goodsid:0,pay_type:0}},ProtocolHttp.sendGoldRoom={action:"Getvenue",skey:"",uid:0,param:[]},ProtocolHttp.GoldRoomJson={GameID:"",base_money:"",id:"",level:"",max_money:"",min_money:"",versusroomcfg:{hasBenefit:!0,benefitLower:2e3,benefitList:[2500,3e3,3500],benefitMaxCnt:3,gameConfig:{gameType:1,maiMaNum:0}}},ProtocolHttp.sendExclusiveRoom={action:"GetExclusiveRoom",skey:"",uid:"",param:[]},ProtocolHttp.SendEditExclusiveRoom={action:"EditExclusiveRoom",skey:"",uid:"",param:{gameConfig:{},deskName:"",basePoint:0,playCount:0,chip:0,deposit:0}},ProtocolHttp.ShareByQrcode={action:"ShareByQrcode",skey:"",uid:0,param:{deskCode:"",deskId:0}},ProtocolHttp.AddDesk={action:"AddDesk",uid:0,skey:"",param:{basePoint:0,ip:"",port:0}},ProtocolHttp.GetRankList={action:"Billboard",skey:"",uid:0,param:[]},ProtocolHttp.GetScoreList={action:"CombatGains",skey:"",uid:0,param:[]},ProtocolHttp.GetScoreDetailList={action:"CombatGainsdetail",skey:"",uid:0,param:{deskBuildDate:0,deskCode:0}},__reflect(ProtocolHttp.prototype,"ProtocolHttp");var UserVO=function(){function e(){}return e}();__reflect(UserVO.prototype,"UserVO");var BottomMenuManager=function(e){function t(){var t=e.call(this)||this;return t.bottomMenu=ObjectPool.getPool(BottomMenus.NAME),t}return __extends(t,e),t.prototype.getBoxA=function(){var e=this.bottomMenu.getObject();return e.skinName="BottomMenuASkin",e},t.prototype.getBoxB=function(){var e=this.bottomMenu.getObject();return e.skinName="BottomMenuBSkin",e},t.prototype.getBoxC=function(){var e=this.bottomMenu.getObject();return e.skinName="BottomMenuCSkin",e},t}(SingleClass);__reflect(BottomMenuManager.prototype,"BottomMenuManager");var BottomName;!function(e){e[e.friends=0]="friends",e[e.mall=1]="mall",e[e.record=2]="record",e[e.knapsack=3]="knapsack",e[e.share=4]="share",e[e.set=5]="set",e[e.email=6]="email",e[e.me=7]="me",e[e.take=8]="take"}(BottomName||(BottomName={}));var BottomMenus=function(e){function t(){var t=e.call(this)||this;return t.abc=1,t.touchEnabled=!0,t}return __extends(t,e),t.prototype.showMenu=function(e){e.addChild(this),this.x=0,this.y=App.StageUtils.stageHeight-120,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},t.prototype.onTouch=function(e){var t;switch(e.target){case this.hall_friends:t=BottomName.friends;break;case this.hall_mall:t=BottomName.mall;break;case this.hall_record:t=BottomName.record;break;case this.hall_knapsack:t=BottomName.knapsack;break;case this.hall_share:t=BottomName.share;break;case this.hall_more:return void this.showPop();case this.hall_set:t=BottomName.set;break;case this.hall_email:t=BottomName.email;break;case this.hall_me:t=BottomName.me;break;case this.hall_take:t=BottomName.take}this.ok(t)&&this.ok.call(t)},t.prototype.showPop=function(){this.two_pop.visible=!this.two_pop.visible},t}(eui.Component);BottomMenus.NAME="BottomMenus",__reflect(BottomMenus.prototype,"BottomMenus");var LoadingLock=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.overTimer=new egret.Timer(1e4,1),t}return __extends(t,e),t.prototype.lock=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),this.callBack=e,this.thisObject=t,this.startOverTimer(),null==this.mc){var o=RES.getRes("loadMc_json"),n=RES.getRes("loadMc_png"),r=new egret.MovieClipDataFactory(o,n);this.mc=new egret.MovieClip(r.generateMovieClipData("load")),this.mc.x=(App.StageUtils.stageWidth-this.mc.width)/2,this.mc.y=(App.StageUtils.stageHeight-this.mc.height)/2}null==this.rect&&(this.rect=new eui.Rect,this.rect.width=App.StageUtils.stageWidth,this.rect.height=App.StageUtils.stageHeight,this.rect.touchEnabled=!0,this.rect.alpha=0),App.LayerManager.lockLayer.addChild(this.rect),App.LayerManager.lockLayer.addChild(this.mc),this.mc.gotoAndPlay("roll",-1)},t.prototype.unlock=function(){this.callBack=null,this.thisObject=null,this.stopOverTimer(),this.mc&&this.mc.parent&&this.mc.parent.removeChild(this.mc),this.rect&&this.rect.parent&&this.rect.parent.removeChild(this.rect)},t.prototype.startOverTimer=function(){this.overTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.overTimer.reset(),this.overTimer.start()},t.prototype.stopOverTimer=function(){this.overTimer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.overTimer.stop()},t.prototype.onTimerComplete=function(){null!=this.callBack&&null!=this.thisObject&&this.callBack.call(this.thisObject),this.unlock()},t}(SingleClass);__reflect(LoadingLock.prototype,"LoadingLock");var MessageBox=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!0,t}return __extends(t,e),t.prototype.showMsg=function(e){null==this.parent&&(App.LayerManager.msgLayer.addChild(this),this.x=(App.StageUtils.stageWidth-this.width)/2,this.y=(App.StageUtils.stageHeight-this.height)/2),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBt,this),this.msgLabel.text=e
},t.prototype.onTouch=function(e){switch(e.target){case this.okBtn:this.ok&&this.ok.call(this.thisObject),this.hideAndRecycle();break;case this.cancelBtn||this.close:this.cancel&&this.cancel.call(this.thisObject),this.hideAndRecycle()}},t.prototype.closeBt=function(){this.hideAndRecycle()},t.prototype.leftTitle=function(e){this.cancelBtn.label=e},t.prototype.centerTitle=function(e){this.okBtn.label=e},t.prototype.rightTitle=function(e){this.okBtn.label=e},t.prototype.hideAndRecycle=function(){egret.Tween.removeTweens(this),this.ok=null,this.cancel=null,this.thisObject=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBt,this),this.hide()},t.prototype.hide=function(){this.parent&&this.parent.removeChild(this)},t}(eui.Component);MessageBox.NAME="MessageBox",__reflect(MessageBox.prototype,"MessageBox");var MessageBoxManager=function(e){function t(){var t=e.call(this)||this;return t.boxPool=ObjectPool.getPool(MessageBox.NAME),t}return __extends(t,e),t.prototype.getBoxA=function(){var e=this.boxPool.getObject();return e.skinName="MessageBoxASkin",e},t.prototype.getBoxB=function(){var e=this.boxPool.getObject();return e.skinName="MessageBoxBSkin",e},t.prototype.getBoxC=function(){var e=this.boxPool.getObject();return e.skinName="MessageBoxCSkin",e},t.prototype.getBoxD=function(){var e=this.boxPool.getObject();return e.skinName="MessageBoxDSkin",e},t.prototype.recycle=function(e){this.boxPool.returnObject(e)},t.prototype.recycleAllBox=function(){for(var e=App.LayerManager.msgLayer,t=e.numChildren,o=t-1;o>=0;o--){var n=e.getChildAt(o);n&&n instanceof MessageBox&&n.hideAndRecycle()}},t}(SingleClass);__reflect(MessageBoxManager.prototype,"MessageBoxManager");var PanelBg=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(eui.Component);__reflect(PanelBg.prototype,"PanelBg");var DKGameController=function(e){function t(){var t=e.call(this)||this;return t.inited=!1,t}return __extends(t,e),t.prototype.onRegister=function(){this.addEvent(GameController.EVENT_SHOW_GAME_SCENE,this.showGameScene,this)},t.prototype.onRemove=function(){this.removeEvent(GameController.EVENT_SHOW_GAME_SCENE,this.showGameScene,this)},t.prototype.showGameScene=function(){},t}(BaseController);DKGameController.NAME="DKGameController",DKGameController.EVENT_REV_ALMS="EVENT_REV_ALMS",DKGameController.EVENT_QUIT_GAME="EVENT_QUIT_GAME",DKGameController.EVENT_SEND_CHAT="EVENT_SEND_CHAT",DKGameController.EVENT_SEND_ACT_FACE="EVENT_SEND_ACT_FACE",DKGameController.EVENT_SHOW_GAME_SCENE="EVENT_SHOW_GAME_SCENE",__reflect(DKGameController.prototype,"DKGameController");var DKGameScene=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameSceneSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){console.log("进入游戏_________________________________________")},t}(BaseScene);__reflect(DKGameScene.prototype,"DKGameScene");var GameController=function(e){function t(){var t=e.call(this)||this;return t.inited=!1,t}return __extends(t,e),t.prototype.onRegister=function(){this.addEvent(t.EVENT_SHOW_GAME_SCENE,this.showGameScene,this)},t.prototype.onRemove=function(){this.removeEvent(t.EVENT_SHOW_GAME_SCENE,this.showGameScene,this)},t.prototype.showGameScene=function(){},t}(BaseController);GameController.NAME="GameController",GameController.EVENT_REV_ALMS="EVENT_REV_ALMS",GameController.EVENT_QUIT_GAME="EVENT_QUIT_GAME",GameController.EVENT_SEND_CHAT="EVENT_SEND_CHAT",GameController.EVENT_SEND_ACT_FACE="EVENT_SEND_ACT_FACE",GameController.EVENT_SHOW_GAME_SCENE="EVENT_SHOW_GAME_SCENE",__reflect(GameController.prototype,"GameController");var GameScene=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameSceneSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){console.log("进入游戏_________________________________________")},t}(BaseScene);__reflect(GameScene.prototype,"GameScene");var HeadUI=function(e){function t(){var t=e.call(this)||this;return t.userID=0,t.skinName="HeadUISkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.hideTuoGuanIcon(),this.headShutup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickShutup,this)},t.prototype.onclickShutup=function(){},t.prototype.setHeadUiShutup=function(e){"game_say1_png"==this.headShutup.source},t.prototype.loadImg=function(e){e&&""!=e&&1!=e&&(this.headImg.source=e,this.headQuestionImg.visible=!1)},t.prototype.isEmpty=function(){return null==this.headImg.bitmapData?!0:!1},t.prototype.showTuoGuanIcon=function(){console.log("托管状态"),this.tuoGuanIcon.visible=!0,this.headShade.visible=!0},t.prototype.hideTuoGuanIcon=function(){this.tuoGuanIcon.visible=!1,this.headShade.visible=!1},t.prototype.clear=function(){this.headImg.bitmapData=null,this.headImg.texture=null,this.headImg.source=null,this.userID=-1,this.nameLabel.text="",this.scoreLabel.text="",this.tuoGuanIcon.visible=!1,this.headQuestionImg.visible=!0},t.prototype.hide=function(){this.headShutup.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickShutup,this),this.parent&&this.parent.removeChild(this)},t}(eui.Component);__reflect(HeadUI.prototype,"HeadUI");var OutTimeUI=function(e){function t(){var t=e.call(this)||this;return t.limitTime=25,t.skinName="OutTimeUISkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.outTimer=new DateTimer(1e3)},t.prototype.startTime=function(){this.outTimer.addEventListener(egret.TimerEvent.TIMER,this.onOutTime,this),this.outTimer.start()},t.prototype.stopTime=function(){this.outTimer.removeEventListener(egret.TimerEvent.TIMER,this.onOutTime,this),this.outTimer.stop()},t.prototype.onOutTime=function(e){if(this.outTimer.currentCount>this.limitTime)return void this.stopTime();var t=this.limitTime-this.outTimer.currentCount;this.setCDLab(NumberTool.formatTime(t)+"")},t.prototype.setCDLab=function(e){this.cdLab.text=e},t}(eui.Component);__reflect(OutTimeUI.prototype,"OutTimeUI");var ResidueUI=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(eui.Component);__reflect(ResidueUI.prototype,"ResidueUI");var AwardPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="AwardSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){this.setCenter(),this.closeBtn.addEventListener("touchTap",this.hide,this)},t.prototype.onRemove=function(){},t}(BasePanel);__reflect(AwardPanel.prototype,"AwardPanel");var CroomPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="CroomSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.updateRadios()},t.prototype.onEnable=function(){this.setCenter(),this.closeBtn.addEventListener("touchTap",this.hide,this),this.okBtn.addEventListener("touchTap",this.onOkBtn,this),this.jdDKRb.group.addEventListener(eui.UIEvent.CHANGE,this.selectGameType,this),this.fourRb.group.addEventListener(eui.UIEvent.CHANGE,this.selectGameType,this)},t.prototype.updateRadios=function(){for(var e=0;e<this.jdDKRb.group.numRadioButtons;e++)this.updateRadioStatus(this.jdDKRb.group.getRadioButtonAt(e));for(var e=0;e<this.fourRb.group.numRadioButtons;e++)this.updateRadioStatus(this.fourRb.group.getRadioButtonAt(e))},t.prototype.updateRadioStatus=function(e){e.getChildAt(1).visible=e.selected},t.prototype.selectGameType=function(e){this.updateRadios()},t.prototype.selectGameCount=function(e){this.updateRadios()},t.prototype.onOkBtn=function(){this.sendData(),this.hide()},t.prototype.sendData=function(){ProtocolData.cmd3.game=this.jdDKRb.group.selectedValue,ProtocolData.cmd3.msg[0].level=this.fourRb.group.selectedValue,App.gameSocket.send(ProtocolData.cmd3)},t.prototype.onRemove=function(){},t}(BasePanel);__reflect(CroomPanel.prototype,"CroomPanel");var ERoomPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ERoomSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){this.setCenter(),this.closeBtn.addEventListener("touchTap",this.hide,this),this.resetBtn.addEventListener("touchTap",this.onReset,this),this.delBtn.addEventListener("touchTap",this.onDel,this),this.noGroup.addEventListener("touchTap",this.onNoGroup,this),this.onReset()},t.prototype.onReset=function(){for(var e=this.roomNoGroup.numChildren,t=e-1;t>=e-5;t--){var o=this.roomNoGroup.getChildAt(t);""!=o.text&&null!=o.text&&(o.text="")}},t.prototype.onDel=function(){for(var e=this.roomNoGroup.numChildren,t=e-1;t>=e-5;t--){var o=this.roomNoGroup.getChildAt(t);if(""!=o.text&&null!=o.text){o.text="";break}}},t.prototype.onNoGroup=function(e){if(e.target instanceof eui.Button){var t=e.target;if(console.log(t.label),null!=t.label&&""!=t.label)for(var o=this.roomNoGroup.numChildren,n=5;o>n;n++){var r=this.roomNoGroup.getChildAt(n);if(""==r.text||null==r.text){r.text=t.label,n==o-1&&this.sendData();break}}}},t.prototype.sendData=function(){for(var e="",t=this.roomNoGroup.numChildren,o=5;t>o;o++){var n=this.roomNoGroup.getChildAt(o);e+=n.text}ProtocolData.cmd6.msg[0].roomId=e,App.gameSocket.send(ProtocolData.cmd6),this.hide()},t.prototype.onRemove=function(){},t}(BasePanel);__reflect(ERoomPanel.prototype,"ERoomPanel");var HallController=function(e){function t(){var t=e.call(this)||this;return t.isReconnection=!1,t}return __extends(t,e),t.prototype.onRegister=function(){this.addEvent(t.EVENT_SHOW_HALL,this.showHallScene,this),this.registerSocket()},t.prototype.registerSocket=function(){var e=App.gameSocket;e.register(ProtocolHead.RevCmd4,this.revCRoom,this),e.register(ProtocolHead.RevCmd5,this.revCRoomErr,this),e.register(ProtocolHead.RevCmd7,this.revERoom,this),e.register(ProtocolHead.RevCmd8,this.revERoomErr,this),this.addEvent(EventConst.SocketConnect,this.onSocketConnect,this),this.addEvent(EventConst.SocketIOError,this.onSocketError,this)},t.prototype.onSocketConnect=function(e){},t.prototype.onSocketError=function(e){e==App.gameSocket&&console.log("网络连接失败，请检查您的网络。")},t.prototype.revERoom=function(e){},t.prototype.revERoomErr=function(e){},t.prototype.revCRoom=function(e){},t.prototype.revCRoomErr=function(e){},t.prototype.onRemove=function(){},t.prototype.showHallScene=function(){this.hallScene=App.SceneManager.runScene(SceneConst.HallScene,this)},t}(BaseController);HallController.NAME="HallController",HallController.EVENT_SHOW_HALL="ShowHallScene",__reflect(HallController.prototype,"HallController");var HallScene=function(e){function t(){var t=e.call(this)||this;return t.skinName="HallSceneSkin",t}return __extends(t,e),t.prototype.onEnable=function(){this.setUserInfoUI(),this.addEventListener("touchTap",this.onTouchTap,this)},t.prototype.childrenCreated=function(){},t.prototype.onRemove=function(){},t.prototype.setUserInfoUI=function(){var e=App.DataCenter.UserInfo.getMyUserVo();e&&(this.userIdLab.text=e.id.toString(),this.nickNameLab.text=e.nickname,this.roomCardLab.text=e.roomCard.toString(),this.headImg.source=e.headImgUrl)},t.prototype.onTouchTap=function(e){switch(e.target){case this.msgBtn:App.PanelManager.open(PanelConst.MsgPanel);break;case this.setBtn:App.PanelManager.open(PanelConst.SetPanel);break;case this.ruleBtn:App.PanelManager.open(PanelConst.RulePanel);break;case this.scoreBtn:App.PanelManager.open(PanelConst.ScorePanel);break;case this.croomBtn:App.PanelManager.open(PanelConst.CroomPanle);break;case this.eroomBtn:App.PanelManager.open(PanelConst.EroomPanel);break;case this.payBtn:App.PanelManager.open(PanelConst.PayPanel);break;case this.headImg:App.PanelManager.open(PanelConst.PersionInfoPanel)}},t}(BaseScene);__reflect(HallScene.prototype,"HallScene");var Marquee=function(e){function t(){var t=e.call(this)||this;return t.skinName="MarqueeSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.init()},t.prototype.init=function(){this.rollingArray=[],this.IsRolling=!1,this.rockLab.mask=this.rockMark,this.rockLab.x=this.width,this.v=.07},t.prototype.onEnable=function(){},t.prototype.startRolling=function(){var e=this,t=App.DataCenter.marqueeInfo.messageMarquee,o=function(){if(e.rollingArray.length<=0){if(!t.length)return void(e.IsRolling=!1);t.forEach(function(t){e.rollingArray.push(t)})}e.IsRolling=!0;var n=e.rollingArray.shift();e.rockLab.text=n;var r=egret.Tween.get(e.rockLab);r.to({x:e.rockMark.x-e.rockLab.width},(e.rockMark.width+e.rockLab.width)/e.v),r.to({x:e.rockMark.x+e.rockMark.width}),r.call(o,e)};o()},t.prototype.push=function(e,t){void 0===t&&(t=1);for(var o=0;t>o;o++)this.rollingArray.unshift(e);this.IsRolling||this.startRolling()},t.prototype.stopRolling=function(){egret.Tween.removeTweens(this.rockLab),this.IsRolling=!1},t.prototype.onRemove=function(){this.stopRolling()},t}(BaseUI);__reflect(Marquee.prototype,"Marquee");var MessagePanel=function(e){function t(){var t=e.call(this)||this;return t.cmd="42",t.skinName="MessageSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){this.setCenter(),App.gameSocket.register(ProtocolHead.RevCmd42,this.revData,this),this.sendData(),this.closeBtn.addEventListener("touchTap",this.hide,this),this.radioRbt.group.addEventListener(eui.UIEvent.CHANGE,this.changeViewStack,this)},t.prototype.sendData=function(){var e=ProtocolData.commond;e.cmd=this.cmd,e.game="-1",App.gameSocket.send(ProtocolData.commond)},t.prototype.revData=function(e){},t.prototype.changeViewStack=function(e){var t=e.target;this.vs.selectedIndex=t.selectedValue},t.prototype.onRemove=function(){App.gameSocket.unRegister(ProtocolHead.RevCmd42),this.closeBtn.removeEventListener("touchTap",this.hide,this),this.radioRbt.group.removeEventListener(eui.UIEvent.CHANGE,this.changeViewStack,this)},t}(BasePanel);__reflect(MessagePanel.prototype,"MessagePanel");var PayPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PayPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.closeBtn.addEventListener("touchTap",this.hide,this),this.radiosRbt.group.addEventListener(eui.UIEvent.CHANGE,this.changeViewStack,this)},t.prototype.onEnable=function(){this.setCenter()},t.prototype.changeViewStack=function(e){var t=e.target;this.vs.selectedIndex=t.selectedValue},t.prototype.onRemove=function(){},t}(BasePanel);__reflect(PayPanel.prototype,"PayPanel");var PersionInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PersonInfoSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){this.setCenter(),this.setUserInfoUI(),this.closeBtn.addEventListener("touchTap",this.hide,this)},t.prototype.setUserInfoUI=function(){var e=App.DataCenter.UserInfo.getMyUserVo();e&&(this.userIdLab.text=e.id.toString(),this.nickNameLab.text=e.nickname,this.roomCardLab.text=e.roomCard.toString(),this.headImg.source=e.headImgUrl)},t.prototype.onRemove=function(){},t}(BasePanel);__reflect(PersionInfoPanel.prototype,"PersionInfoPanel");var RulePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="RulePanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){this.setCenter(),this.closeBtn.addEventListener("touchTap",this.hide,this),this.radioRbt.group.addEventListener(eui.UIEvent.CHANGE,this.changeViewStack,this)},t.prototype.changeViewStack=function(e){var t=e.target;this.vs.selectedIndex=t.selectedValue},t.prototype.onRemove=function(){},t}(BasePanel);__reflect(RulePanel.prototype,"RulePanel");var ScoreItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},t.prototype.dataChanged=function(){this.setUIData()},t.prototype.setUIData=function(){this.dateLab.text=this.data.date,this.roomNoLab.text=this.data.roomId,this.timeLab.text=this.data.time,this.firstNickNameLab.text=this.data.firstNickName,this.secondNickNameLab.text=this.data.secondNickName,this.thridNickNameLab.text=this.data.thridNickName,this.fourthNickNameLab.text=this.data.fourthNickName,this.firstScoreLab.text=this.formatScore(this.data.firstScore),this.secondScoreLab.text=this.formatScore(this.data.secondScore),this.thridScoreLab.text=this.formatScore(this.data.thridScore),this.fourthScoreLab.text=this.formatScore(this.data.fourthScore)},t.prototype.formatScore=function(e){return e>0?"+"+e:""+e},t.prototype.onTouch=function(e){},t}(eui.ItemRenderer);__reflect(ScoreItem.prototype,"ScoreItem");var ScorePanel=function(e){function t(){var t=e.call(this)||this;return t.cmd="41",t.skinName="ScorePanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){this.setCenter(),App.gameSocket.register(ProtocolHead.RevCmd41,this.revData,this),this.dkScoreList.dataProvider.removeAll(),this.sendData(),this.closeBtn.addEventListener("touchTap",this.hide,this),this.radioRbt.group.addEventListener(eui.UIEvent.CHANGE,this.changeViewStack,this)},t.prototype.sendData=function(){var e=ProtocolData.commond;e.cmd=this.cmd,e.game="-1",App.gameSocket.send(ProtocolData.commond)},t.prototype.revData=function(e){var t=this.dkScoreList.dataProvider,o=e.msg[0][0];t.addItem(o)},t.prototype.changeViewStack=function(e){var t=e.target;this.vs.selectedIndex=t.selectedValue},t.prototype.onRemove=function(){App.gameSocket.unRegister(ProtocolHead.RevCmd41),this.closeBtn.removeEventListener("touchTap",this.hide,this),this.radioRbt.group.removeEventListener(eui.UIEvent.CHANGE,this.changeViewStack,this)},t}(BasePanel);__reflect(ScorePanel.prototype,"ScorePanel");var SetPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="SetPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onEnable=function(){this.setCenter(),this.closeBtn.addEventListener("touchTap",this.hide,this),this.musicSlider.addEventListener(eui.UIEvent.CHANGE,this.onMusicSlider,this),this.effectSlider.addEventListener(eui.UIEvent.CHANGE,this.onEffectSlider,this)},t.prototype.onMusicSlider=function(e){var t=e.target.value;App.SoundManager.bgmVolume=t},t.prototype.onEffectSlider=function(e){App.SoundManager.effectVolume=e.target.value},t.prototype.onRemove=function(){},t}(BasePanel);__reflect(SetPanel.prototype,"SetPanel");var PreloadPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PreloadPanelSkin",t}return __extends(t,e),t.prototype.onEnable=function(){},t.prototype.onRemove=function(){},t.prototype.setProgress=function(e){},t}(BaseScene);__reflect(PreloadPanel.prototype,"PreloadPanel");var LoginController=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onRegister=function(){this.addEvent(t.EVENT_SHOW_LOGIN,this.showLoginScene,this),this.registerSocket()},t.prototype.registerSocket=function(){var e=App.gameSocket;e.register(ProtocolHead.RevCmd2,this.revLogin,this),e.register(ProtocolHead.RevCmd39,this.revLogin,this),this.addEvent(EventConst.SocketConnect,this.onSocketConnect,this),this.addEvent(EventConst.SocketIOError,this.onSocketError,this)},t.prototype.revLogin=function(e){this.gotoHall()},t.prototype.onLogin=function(){App.gameSocket.startConnect(App.DataCenter.ServerInfo.GAME_SERVER,!1)},t.prototype.onSocketConnect=function(e){var t=ProtocolData.sendLogin;App.gameSocket.send(t)},t.prototype.onSocketError=function(e){e==App.gameSocket&&console.log("网络连接失败，请检查您的网络。")},t.prototype.showLoginScene=function(){this.startLoadLogin();egret.getOption("code")},t.prototype.startLoadLogin=function(){App.PanelManager.open(PanelConst.PreloadPanel);App.ResUtils.loadGroup(["hall","common","login"],this,this.loadLoginComplete,this.loadLoginProgress)},t.prototype.loadLoginProgress=function(e){var t=App.PanelManager.getPanel(PanelConst.PreloadPanel);t.setProgress(Math.round(e.itemsLoaded/e.itemsTotal*100))},t.prototype.loadLoginComplete=function(){App.DataCenter.UserInfo.setMyUserVo(),App.PanelManager.close(PanelConst.PreloadPanel),this.loginScene=App.SceneManager.runScene(SceneConst.LoginScene),this.loginScene.setController(this)},t.prototype.gotoHall=function(){console.log("显示大厅"),App.getInstance().sendEvent(HallController.EVENT_SHOW_HALL)},t}(BaseController);LoginController.NAME="LoginController",LoginController.EVENT_SHOW_LOGIN="ShowLoginScene",__reflect(LoginController.prototype,"LoginController");var LoginScene=function(e){function t(){var t=e.call(this)||this;return t.skinName="LoginSceneSkin",t}return __extends(t,e),t.prototype.onEnable=function(){App.DeviceUtils.IsNative&&(this.isToken(),this.backWXLogin()),this.wxLoginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onWXLogin,this)},t.prototype.onRemove=function(){this.wxLoginBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onWXLogin,this)},t.prototype.isToken=function(){var e=egret.localStorage.getItem("refresh_token");if(null!=e&&void 0!=e){this.wxLoginBtn.visible=!1;new LoginController}else this.wxLoginBtn.visible=!0},t.prototype.backWXLogin=function(){egret.ExternalInterface.addCallback("wxLoginBack",function(e){})},t.prototype.onWXLogin=function(e){this.ctrl.onLogin()},t.prototype.getChangeList=function(){var e=RES.getVersionController().getChangeList(),t=e.length;console.log("加载列表长度:"+t);for(var o=0;t>o;o++)console.log("加载列表"+o+":"+e[o].url+","+e[o].size)},t}(BaseScene);__reflect(LoginScene.prototype,"LoginScene");var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),App.ResUtils.addConfig("resource/default.res.json","resource/"),App.ResUtils.loadConfig(this.onConfigComplete,this)},t.prototype.onConfigComplete=function(e){var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},t.prototype.onThemeLoadComplete=function(){App.ResUtils.loadGroup(AssetConst.Preload,this,this.onPreloadComplete)},t.prototype.onPreloadComplete=function(e){this.startCreateScene()},t.prototype.startCreateScene=function(){egret.OrientationMode.LANDSCAPE,App.getInstance().startUp()},t}(eui.UILayer);__reflect(Main.prototype,"Main");